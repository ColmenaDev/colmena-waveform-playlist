/*! For license information please see waveform-playlist.js.LICENSE.txt */
var WaveformPlaylist;(()=>{var t={2562:t=>{function e(t,e,r){for(var n=0;n<r.length;n++)t.setUint8(e+n,r.charCodeAt(n))}t.exports=function(t,r){r=r||{};var n=t.numberOfChannels,i=t.sampleRate,a=r.float32?3:1,s=3===a?32:16;return function(t,r,n,i,a){var s=a/8,o=i*s,u=new ArrayBuffer(44+t.length*s),c=new DataView(u);return e(c,0,"RIFF"),c.setUint32(4,36+t.length*s,!0),e(c,8,"WAVE"),e(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,r,!0),c.setUint16(22,i,!0),c.setUint32(24,n,!0),c.setUint32(28,n*o,!0),c.setUint16(32,o,!0),c.setUint16(34,a,!0),e(c,36,"data"),c.setUint32(40,t.length*s,!0),1===r?function(t,e,r){for(var n=0;n<r.length;n++,e+=2){var i=Math.max(-1,Math.min(1,r[n]));t.setInt16(e,i<0?32768*i:32767*i,!0)}}(c,44,t):function(t,e,r){for(var n=0;n<r.length;n++,e+=4)t.setFloat32(e,r[n],!0)}(c,44,t),u}(2===n?function(t,e){for(var r=t.length+e.length,n=new Float32Array(r),i=0,a=0;i<r;)n[i++]=t[a],n[i++]=e[a],a++;return n}(t.getChannelData(0),t.getChannelData(1)):t.getChannelData(0),a,i,n,s)}},8098:t=>{t.exports=function(t){var e,r=String.prototype.split,n=/()??/.exec("")[1]===t;return e=function(e,i,a){if("[object RegExp]"!==Object.prototype.toString.call(i))return r.call(e,i,a);var s,o,u,c,l=[],h=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),f=0;for(i=new RegExp(i.source,h+"g"),e+="",n||(s=new RegExp("^"+i.source+"$(?!\\s)",h)),a=a===t?-1>>>0:a>>>0;(o=i.exec(e))&&!((u=o.index+o[0].length)>f&&(l.push(e.slice(f,o.index)),!n&&o.length>1&&o[0].replace(s,(function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(o[e]=t)})),o.length>1&&o.index<e.length&&Array.prototype.push.apply(l,o.slice(1)),c=o[0].length,f=u,l.length>=a));)i.lastIndex===o.index&&i.lastIndex++;return f===e.length?!c&&i.test("")||l.push(""):l.push(e.slice(f)),l.length>a?l.slice(0,a):l},e}()},7296:(t,e,r)=>{"use strict";var n=r(1102),i=r(2307),a=r(4339),s=r(3957),o=r(3246);(t.exports=function(t,e){var r,i,u,c,l;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],n(t)?(r=o.call(t,"c"),i=o.call(t,"e"),u=o.call(t,"w")):(r=u=!0,i=!1),l={value:e,configurable:r,enumerable:i,writable:u},c?a(s(c),l):l}).gs=function(t,e,r){var u,c,l,h;return"string"!=typeof t?(l=r,r=e,e=t,t=null):l=arguments[3],n(e)?i(e)?n(r)?i(r)||(l=r,r=void 0):r=void 0:(l=e,e=r=void 0):e=void 0,n(t)?(u=o.call(t,"c"),c=o.call(t,"e")):(u=!0,c=!1),h={get:e,set:r,configurable:u,enumerable:c},l?a(s(l),h):h}},817:t=>{"use strict";t.exports=function(){}},4339:(t,e,r)=>{"use strict";t.exports=r(1994)()?Object.assign:r(963)},1994:t=>{"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},963:(t,e,r)=>{"use strict";var n=r(3450),i=r(1836),a=Math.max;t.exports=function(t,e){var r,s,o,u=a(arguments.length,2);for(t=Object(i(t)),o=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},s=1;s<u;++s)n(e=arguments[s]).forEach(o);if(void 0!==r)throw r;return t}},8349:(t,e,r)=>{"use strict";var n=r(817)();t.exports=function(t){return t!==n&&null!==t}},3450:(t,e,r)=>{"use strict";t.exports=r(3446)()?Object.keys:r(9177)},3446:t=>{"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},9177:(t,e,r)=>{"use strict";var n=r(8349),i=Object.keys;t.exports=function(t){return i(n(t)?Object(t):t)}},3957:(t,e,r)=>{"use strict";var n=r(8349),i=Array.prototype.forEach,a=Object.create;t.exports=function(t){var e=a(null);return i.call(arguments,(function(t){n(t)&&function(t,e){var r;for(r in t)e[r]=t[r]}(Object(t),e)})),e}},79:t=>{"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},1836:(t,e,r)=>{"use strict";var n=r(8349);t.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},3246:(t,e,r)=>{"use strict";t.exports=r(8711)()?String.prototype.contains:r(2370)},8711:t=>{"use strict";var e="razdwatrzy";t.exports=function(){return"function"==typeof e.contains&&!0===e.contains("dwa")&&!1===e.contains("foo")}},2370:t=>{"use strict";var e=String.prototype.indexOf;t.exports=function(t){return e.call(this,t,arguments[1])>-1}},9401:(t,e,r)=>{"use strict";r(8625)("ev-store","7");var n="__EV_STORE_KEY@7";t.exports=function(t){var e=t[n];return e||(e=t[n]={}),e}},8709:(t,e,r)=>{"use strict";var n,i,a,s,o,u,c,l=r(7296),h=r(79),f=Function.prototype.apply,d=Function.prototype.call,p=Object.create,v=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var r,i;return h(e),i=this,n.call(this,t,r=function(){a.call(i,t,r),f.call(e,this,arguments)}),r.__eeOnceListener__=e,this},o={on:n=function(t,e){var r;return h(e),y.call(this,"__ee__")?r=this.__ee__:(r=g.value=p(null),v(this,"__ee__",g),g.value=null),r[t]?"object"==typeof r[t]?r[t].push(e):r[t]=[r[t],e]:r[t]=e,this},once:i,off:a=function(t,e){var r,n,i,a;if(h(e),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[t])return this;if("object"==typeof(n=r[t]))for(a=0;i=n[a];++a)i!==e&&i.__eeOnceListener__!==e||(2===n.length?r[t]=n[a?0:1]:n.splice(a,1));else n!==e&&n.__eeOnceListener__!==e||delete r[t];return this},emit:s=function(t){var e,r,n,i,a;if(y.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(r=arguments.length,a=new Array(r-1),e=1;e<r;++e)a[e-1]=arguments[e];for(i=i.slice(),e=0;n=i[e];++e)f.call(n,this,a)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),e=1;e<r;++e)a[e-1]=arguments[e];f.call(i,this,a)}}},u={on:l(n),once:l(i),off:l(a),emit:l(s)},c=m({},u),t.exports=e=function(t){return null==t?p(c):m(Object(t),u)},e.methods=o},343:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,a),n(r)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}v(t,e,a,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,a,s,c;if(o(r),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),void 0===s)s=a[e]=r,++t._eventsCount;else if("function"==typeof s?s=a[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(t))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function f(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function v(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){n.once&&t.removeEventListener(e,i),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=a[t];if(void 0===u)return!1;if("function"==typeof u)n(u,this,e);else{var c=u.length,l=p(u,c);for(r=0;r<c;++r)n(l[r],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return o(e),this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,a,s;if(o(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},4571:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear=function(t,e){var r,n,i=new Float32Array(t),a=t-1;for(r=0;r<t;r++)n=r/a,i[r]=e>0?n:1-n;return i},e.exponential=function(t,e){var r,n,i=new Float32Array(t),a=t-1;for(r=0;r<t;r++)n=r/a,i[e>0?r:t-1-r]=Math.exp(2*n-1)/Math.exp(1);return i},e.sCurve=function(t,e){var r,n=new Float32Array(t),i=e>0?Math.PI/2:-Math.PI/2;for(r=0;r<t;++r)n[r]=Math.sin(Math.PI*r/t-i)/2+.5;return n},e.logarithmic=function(t,e,r){var n,i=new Float32Array(t),a=0;for(n=0;n<t;n++)a=n/t,i[r>0?n:t-1-n]=Math.log(1+e*a)/Math.log(1+e);return i}},9304:(t,e,r)=>{"use strict";e.h7=e.Y1=e.Hp=e.Jl=e.t$=e._h=void 0,e.L7=function(t,e,r,n){switch(e){case i:u.call(t,r,n);break;case a:l.call(t,r,n);break;case s:f.call(t,r,n);break;case o:p.call(t,r,n);break;default:throw new Error("Unsupported Fade type")}},e.Mt=function(t,e,r,n){switch(e){case i:c.call(t,r,n);break;case a:h.call(t,r,n);break;case s:d.call(t,r,n);break;case o:v.call(t,r,n);break;default:throw new Error("Unsupported Fade type")}};var n=r(4571),i=e._h="sCurve",a=e.t$="linear",s=e.Jl="exponential",o=e.Hp="logarithmic";function u(t,e){var r=(0,n.sCurve)(1e4,1);this.setValueCurveAtTime(r,t,e)}function c(t,e){var r=(0,n.sCurve)(1e4,-1);this.setValueCurveAtTime(r,t,e)}function l(t,e){this.linearRampToValueAtTime(0,t),this.linearRampToValueAtTime(1,t+e)}function h(t,e){this.linearRampToValueAtTime(1,t),this.linearRampToValueAtTime(0,t+e)}function f(t,e){this.exponentialRampToValueAtTime(.01,t),this.exponentialRampToValueAtTime(1,t+e)}function d(t,e){this.exponentialRampToValueAtTime(1,t),this.exponentialRampToValueAtTime(.01,t+e)}function p(t,e){var r=(0,n.logarithmic)(1e4,10,1);this.setValueCurveAtTime(r,t,e)}function v(t,e){var r=(0,n.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(r,t,e)}e.Y1="FadeIn",e.h7="FadeOut"},474:(t,e,r)=>{var n,i=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},a=r(444);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),t.exports=n},6579:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(6964);e.default=class{constructor(t){this.path="",this.effects=[],this.startsAt=0,this.offset=0,this.audioConext=t}addEffect(t,e={}){const r=(0,i.resolveEffect)(t,e,this.audioConext);return this.effects.push(r),r}setPath(t){return n(this,void 0,void 0,(function*(){this.path=t}))}setStartsAt(t){this.startsAt=t}getStartsAt(){return this.startsAt}setOffset(t){this.offset=t}getOffset(){return this.offset}setDuration(t){this.duration=t}getDuration(){return this.duration}toJson(){return JSON.stringify(this.toObject())}toObject(){return{path:this.path,startsAt:this.startsAt,offset:this.offset,duration:this.duration,effects:this.effects.map((t=>t.toObject()))}}applyEffects(t,e){if(0==this.effects.length)null==t||t.connect(e.destination);else{console.log("calling apply effects");let r=this.effects[0].apply(this,e);null==t||t.connect(r),this.effects.splice(1).forEach((t=>{const n=t.apply(this,e);r.connect(n),r=n})),r.connect(e.destination)}}play(){return n(this,void 0,void 0,(function*(){this.processClip(this.audioConext)}))}processClip(t){return n(this,void 0,void 0,(function*(){const e=t.createBufferSource();e.buffer=yield fetch(this.path).then((t=>t.arrayBuffer())).then((e=>t.decodeAudioData(e))),this.applyEffects(e,t),e.start(this.startsAt,this.offset,this.duration)}))}}},674:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t={}){this.name="",this.params={},this.params=t}toJson(){return JSON.stringify(this.toObject())}setParams(t){return this.params=t,this}toObject(){return{name:this.name,params:this.params}}}},2849:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(r(4011)),s=i(r(9478)),o=r(343);class u extends o.EventEmitter{constructor(){super(),this.audioContext=new AudioContext,this.history=new s.default(1),this.cursor=0,this.tracks=[],requestAnimationFrame(this.monitorCursorChanges.bind(this))}undo(){return!!this.history.undo()&&(this.applyCurrentHistory(),!0)}applyCurrentHistory(){this.getHistoryCount()<=1||(this.clearProject(),JSON.parse(this.history.current()).tracks.forEach((t=>{const e=this.newTrack();t.clips.forEach((t=>{const r=e.newClip(t.path);r.setStartsAt(t.startsAt),r.setOffset(t.offset),r.setDuration(t.duration),t.effects.forEach((t=>{r.addEffect(t.name,t.params)}))}))})))}redo(){this.history.redo(),this.applyCurrentHistory()}commit(){this.history.commit(this.toJson(),!0),console.log("History Updated",this.getHistoryCount())}clearProject(){this.tracks=[],this.audioContext=new AudioContext}newTrack(){const t=new a.default(this.audioContext);return this.tracks.push(t),t}play(){return n(this,void 0,void 0,(function*(){this.emit("play"),this.tracks.forEach((t=>{t.play()}));const t=this.tracks.map((t=>t.play()));yield Promise.all(t)}))}pause(){this.emit("pause"),this.audioContext.suspend()}toJson(){return JSON.stringify(this.toObject())}toObject(){return{cursor:this.cursor,tracks:this.tracks.map((t=>t.toObject())),history:this.history.toObject()}}getTracks(){return this.tracks}getHistoryCount(){return this.history.count()}forget(t){return this.history.forget(t)}isInLastVersion(){return this.history.isInLastVersion()}static createFromJson(t){const e=new u;return e.loadJson(t),e}loadJson(t){const e=JSON.parse(t);e.tracks.forEach((t=>{const e=this.newTrack();t.clips.forEach((t=>{const r=e.newClip(t.path);r.setStartsAt(t.startsAt),r.setOffset(t.offset),r.setDuration(t.duration),t.effects.forEach((t=>{r.addEffect(t.name,t.params)}))}))})),null!=e.hisotry&&(void 0!==e.history.cooldown&&this.history.setCooldown(e.history.cooldown),e.history.cooldownState&&this.history.setCooldownState(e.history.cooldownState),e.history.currentIndex&&this.history.setCurrentIndex(e.history.currentIndex),e.history.stack&&this.history.setHistoryStack(e.history.stack)),this.commit()}monitorCursorChanges(){this.cursor!==this.audioContext.currentTime&&(this.cursor=this.audioContext.currentTime,this.emit("cursor:update",this.cursor)),requestAnimationFrame(this.monitorCursorChanges.bind(this))}render(){return n(this,void 0,void 0,(function*(){const t=new OfflineAudioContext({numberOfChannels:2,length:441e3,sampleRate:44100}),e=this.tracks.map((e=>e.processTrack(t)));return yield Promise.all(e),t.startRendering()}))}playBuffer(t){const e=new AudioContext,r=e.createBufferSource();r.buffer=t,r.connect(e.destination),r.start()}}e.default=u},4011:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(r(6579));e.default=class{constructor(t){this.clips=[],this.audioConext=t}newClip(t){const e=new a.default(this.audioConext);return e.setPath(t),this.clips.push(e),e}toJson(){return JSON.stringify(this.toObject())}toObject(){return{clips:this.clips.map((t=>t.toObject()))}}play(){return n(this,void 0,void 0,(function*(){this.clips.forEach((t=>{t.play()}));const t=this.clips.map((t=>t.play()));yield Promise.all(t)}))}processTrack(t){return n(this,void 0,void 0,(function*(){this.clips.forEach((e=>{e.processClip(t)}));const e=this.clips.map((e=>e.processClip(t)));return yield Promise.all(e)}))}}},9478:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t=1){this.stack=[""],this.currentIndex=0,this.cooldownState=0,this.cooldown=t}commit(t,e=!1){this.currentIndex===this.stack.length-1?(this.cooldownState>=this.cooldown||0===this.cooldownState)&&!0!==e?(this.stack.push(t),this.currentIndex++,this.cooldownState=1):this.cooldownState<this.cooldown&&!0!==e?(this.current(t),this.cooldownState++):!0===e&&(this.stack.push(t),this.currentIndex++,this.cooldownState=this.cooldown):this.currentIndex<this.stack.length-1&&(!0!==e?(this.stack.length=this.currentIndex+1,this.stack.push(t),this.currentIndex++,this.cooldownState=1):!0===e&&(this.stack.length=this.currentIndex+1,this.stack.push(t),this.currentIndex++,this.cooldownState=this.cooldown))}undo(){return this.currentIndex>0&&(this.currentIndex--,!0)}redo(){return this.currentIndex<this.stack.length-1&&this.currentIndex++,!1}isInLastVersion(){return this.currentIndex==this.count()-1}current(t=null){return t&&(this.stack[this.currentIndex]=t),this.stack[this.currentIndex]}count(){return this.stack.length}forget(t=1){return!(this.currentIndex<t||(this.stack.splice(this.currentIndex-t,t),this.currentIndex-=t,0))}toObject(){return{cooldown:this.cooldown,stack:this.stack,currentIndex:this.currentIndex,cooldownState:this.cooldownState}}setHistoryStack(t){this.stack=t}setCooldownState(t){this.cooldownState=t}setCurrentIndex(t){this.currentIndex=t}setCooldown(t){this.cooldownState=t}}},7408:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(674));class a extends i.default{constructor(){super(...arguments),this.name="default"}apply(t,e){}}e.default=a},9919:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(674));class a extends i.default{constructor(){super(...arguments),this.name="fade-in"}apply(t,e){var r,n;console.log("Applying Fade-in with params",this.params);const i=e.createGain();i.gain.value=0;const a=i.gain,s=null!==(n=null===(r=this.params)||void 0===r?void 0:r.duration)&&void 0!==n?n:2,o=t.getStartsAt();return a.setValueAtTime(0,o),a.linearRampToValueAtTime(1,o+s),i}}e.default=a},9383:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(674));class a extends i.default{constructor(){super(...arguments),this.name="fade-out"}apply(t,e){var r,n;console.log("Applying Fade-out with params",this.params);const i=e.createGain();i.gain.setValueAtTime(1,e.currentTime);const a=null!==(r=t.getDuration())&&void 0!==r?r:0,s=t.getStartsAt()+a-(null!==(n=this.params.duration)&&void 0!==n?n:2),o=this.params.duration;return i.gain.setValueAtTime(1,s),i.gain.linearRampToValueAtTime(0,s+o),i}}e.default=a},6964:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveEffect=void 0;const i=n(r(7408)),a=n(r(9919)),s=n(r(9383));e.resolveEffect=(t,e={},r)=>{let n;switch(t){case"fade-in":n=new a.default(e);break;case"fade-out":n=new s.default(e);break;default:n=new i.default(e)}return n}},393:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AudioProject=void 0;const i=n(r(2849));e.AudioProject=i.default,e.default=i.default},7051:(t,e,r)=>{"use strict";var n="undefined"!=typeof window?window:void 0!==r.g?r.g:{};t.exports=function(t,e){return t in n?n[t]:(n[t]=e,e)}},8625:(t,e,r)=>{"use strict";var n=r(7051);t.exports=function(t,e,r){var i="__INDIVIDUAL_ONE_VERSION_"+t,a=n(i+"_ENFORCE_SINGLETON",e);if(a!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+a+" installed.\nThis means you cannot install version "+e);return n(i,r)}},1072:(t,e,r)=>{var n=!!(r.g===r.g.window&&r.g.URL&&r.g.Blob&&r.g.Worker);function i(t,e){var i,a=this;if(e=e||{},n)return i=t.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new r.g.Worker(r.g.URL.createObjectURL(new r.g.Blob([i],{type:"text/javascript"})));this.self=e,this.self.postMessage=function(t){setTimeout((function(){a.onmessage({data:t})}),0)},setTimeout(t.bind(e,e),0)}i.prototype.postMessage=function(t){var e=this;setTimeout((function(){e.self.onmessage({data:t})}),0)},t.exports=i},4436:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},2858:(t,e,r)=>{t.exports=function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,r,n)}return r[s].exports}for(var a=void 0,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,s,o,u,c,l=[],h=0,f=t.length,d=f,p="string"!==n.getTypeOf(t);h<t.length;)d=f-h,i=p?(e=t[h++],r=h<f?t[h++]:0,h<f?t[h++]:0):(e=t.charCodeAt(h++),r=h<f?t.charCodeAt(h++):0,h<f?t.charCodeAt(h++):0),s=e>>2,o=(3&e)<<4|r>>4,u=1<d?(15&r)<<2|i>>6:64,c=2<d?63&i:64,l.push(a.charAt(s)+a.charAt(o)+a.charAt(u)+a.charAt(c));return l.join("")},r.decode=function(t){var e,r,n,s,o,u,c=0,l=0,h="data:";if(t.substr(0,5)===h)throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===a.charAt(64)&&d--,t.charAt(t.length-2)===a.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|d):new Array(0|d);c<t.length;)e=a.indexOf(t.charAt(c++))<<2|(s=a.indexOf(t.charAt(c++)))>>4,r=(15&s)<<4|(o=a.indexOf(t.charAt(c++)))>>2,n=(3&o)<<6|(u=a.indexOf(t.charAt(c++))),f[l++]=e,64!==o&&(f[l++]=r),64!==u&&(f[l++]=n);return f}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),s=t("./stream/DataLengthProbe");function o(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}o.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},e.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var a=i,s=0+r;t^=-1;for(var o=0;o<s;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}(0|e,t,t.length):function(t,e,r,n){var a=i,s=0+r;t^=-1;for(var o=0;o<s;o++)t=t>>>8^a[255&(t^e.charCodeAt(o))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),a=t("./utils"),s=t("./stream/GenericWorker"),o=n?"uint8array":"array";function u(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",a.inherits(u,s),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,t.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new u("Deflate",t)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function n(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n}function i(t,e,r,i,s,l){var h,f,d=t.file,p=t.compression,v=l!==o.utf8encode,m=a.transformTo("string",l(d.name)),y=a.transformTo("string",o.utf8encode(d.name)),g=d.comment,b=a.transformTo("string",l(g)),_=a.transformTo("string",o.utf8encode(g)),k=y.length!==d.name.length,w=_.length!==g.length,x="",S="",E="",O=d.dir,P=d.date,C={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(C.crc32=t.crc32,C.compressedSize=t.compressedSize,C.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),v||!k&&!w||(T|=2048);var A=0,j=0;O&&(A|=16),"UNIX"===s?(j=798,A|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(d.unixPermissions,O)):(j=20,A|=function(t){return 63&(t||0)}(d.dosPermissions)),h=P.getUTCHours(),h<<=6,h|=P.getUTCMinutes(),h<<=5,h|=P.getUTCSeconds()/2,f=P.getUTCFullYear()-1980,f<<=4,f|=P.getUTCMonth()+1,f<<=5,f|=P.getUTCDate(),k&&(S=n(1,1)+n(u(m),4)+y,x+="up"+n(S.length,2)+S),w&&(E=n(1,1)+n(u(b),4)+_,x+="uc"+n(E.length,2)+E);var R="";return R+="\n\0",R+=n(T,2),R+=p.magic,R+=n(h,2),R+=n(f,2),R+=n(C.crc32,4),R+=n(C.compressedSize,4),R+=n(C.uncompressedSize,4),R+=n(m.length,2),R+=n(x.length,2),{fileRecord:c.LOCAL_FILE_HEADER+R+m+x,dirRecord:c.CENTRAL_FILE_HEADER+n(j,2)+R+n(b.length,2)+"\0\0\0\0"+n(A,4)+n(i,4)+m+x+b}}var a=t("../utils"),s=t("../stream/GenericWorker"),o=t("../utf8"),u=t("../crc32"),c=t("../signature");function l(t,e,r,n){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(l,s),l.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return c.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,s){var o=a.transformTo("string",s(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+n(o.length,2)+o}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var a=new i(e.streamFiles,r,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,r){s++;var i=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,e.compression),o=r.options.compressionOptions||e.compressionOptions||{},u=r.dir,c=r.date;r._compressWorker(i,o).withStreamInfo("file",{name:t,dir:u,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(a)})),a.entriesCount=s}catch(t){a.error(t)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),a=t("./utf8"),s=t("./zipEntries"),o=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function c(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new o);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new s(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var a=0;a<n.length;a++)r.push(c(n[a]));return i.Promise.all(r)})).then((function(t){for(var i=t.shift(),a=i.files,s=0;s<a.length;s++){var o=a[s],u=o.fileNameStr,c=n.resolve(o.fileNameStr);r.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders}),o.dir||(r.file(c).unsafeOriginalName=u)}return i.zipComment.length&&(r.comment=i.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function a(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(a,i),a.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function n(t,e,r){var n,i=a.getTypeOf(e),o=a.extend(r||{},u);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=v(t)),o.createFolders&&(n=p(t))&&m.call(this,n,!0);var h="string"===i&&!1===o.binary&&!1===o.base64;r&&void 0!==r.binary||(o.binary=!h),(e instanceof c&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",i="string");var y;y=e instanceof c||e instanceof s?e:f.isNode&&f.isStream(e)?new d(t,e):a.prepareContent(t,e,o.binary,o.optimizedBinaryString,o.base64);var g=new l(t,y,o);this.files[t]=g}var i=t("./utf8"),a=t("./utils"),s=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),u=t("./defaults"),c=t("./compressedObject"),l=t("./zipObject"),h=t("./generate"),f=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},v=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:u.createFolders,t=v(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var g={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n)},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,r),this;if(y(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var a=this.files[this.root+t];return a&&!a.dir?a:null},folder:function(t){if(!t)return this;if(y(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=m.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=a.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";e=h.generateWorker(this,r,n)}catch(t){(e=new s("error")).error(t)}return new o(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=g},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){"use strict";e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.readData(4);return e===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),a=t("./ArrayReader"),s=t("./StringReader"),o=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new o(t):i.uint8array?new u(n.transformTo("uint8array",t)):new a(n.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function a(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(a,n),a.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,n),a.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function a(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(a,i),a.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function a(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),a=t("./GenericWorker"),s=t("../base64"),o=t("../support"),u=t("../external"),c=null;if(o.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function l(t,e,r){var s=e;switch(e){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=e,this._mimeType=r,n.checkSupport(s),this._worker=t.pipe(new i(s)),t.lock()}catch(t){this._worker=new a("error"),this._worker.error(t)}}l.prototype={accumulate:function(t){return function(t,e){return new u.Promise((function(r,i){var a=[],o=t._internalType,u=t._outputType,c=t._mimeType;t.on("data",(function(t,r){a.push(t),e&&e(r)})).on("error",(function(t){a=[],i(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),r);case"base64":return s.encode(e);default:return n.transformTo(t,e)}}(u,function(t,e){var r,n=0,i=null,a=0;for(r=0;r<e.length;r++)a+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(a),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(o,a),c);r(t)}catch(t){i(t)}a=[]})).resume()}))}(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),a=t("./nodejsUtils"),s=t("./stream/GenericWorker"),o=new Array(256),u=0;u<256;u++)o[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(t){return i.nodebuffer?a.newBufferFrom(t,"utf-8"):function(t){var e,r,n,a,s,o=t.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=s=0;s<u;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,a,s=t.length,u=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)u[r++]=i;else if(4<(a=o[i]))u[r++]=65533,e+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&e<s;)i=i<<6|63&t[e++],a--;1<a?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(c,s),c.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=e;(e=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),e.set(a,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}(e),u=e;s!==e.length&&(i.uint8array?(u=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(u=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:r.utf8decode(u),meta:t.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,n.inherits(l,s),l.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),a=t("./nodejsUtils"),s=t("./external");function o(t){return t}function u(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}t("setimmediate"),r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,r){var n=[],i=0,a=t.length;if(a<=r)return String.fromCharCode.apply(null,t);for(;i<a;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(t){return!1}}()}};function l(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return c.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function h(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=l;var f={};f.string={string:o,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,a.allocBuffer(t.length))}},f.array={string:l,array:o,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(t)}},f.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:o,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:o,nodebuffer:function(t){return a.newBufferFrom(t)}},f.nodebuffer={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:o},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return f[n][t](e)},r.resolve=function(t){for(var e=t.split("/"),r=[],n=0;n<e.length;n++){var i=e[n];"."===i||""===i&&0!==n&&n!==e.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&a.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){setImmediate((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,a,o,c){return s.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var l=r.getTypeOf(e);return l?("arraybuffer"===l?e=r.transformTo("uint8array",e):"string"===l&&(c?e=i.decode(e):a&&!0!==o&&(e=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),a=t("./signature"),s=t("./zipEntry"),o=t("./support");function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(0<n)this.isSignature(e,a.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),a=t("./compressedObject"),s=t("./crc32"),o=t("./utf8"),u=t("./compressions"),c=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(Object.prototype.hasOwnProperty.call(u,e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(i)},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function n(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),s=t("./utf8"),o=t("./compressedObject"),u=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!n&&(e=e.pipe(new s.Utf8EncodeWorker)),!a&&n&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new u("error")).error(t)}return new i(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)n.prototype[c[h]]=l;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,s=new i(l),o=t.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var u=new t.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}e.exports=function(t){1!==c.push(t)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var a={},s=["REJECTED"],o=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(t,e,r){n((function(){var n;try{n=e(r)}catch(n){return a.reject(t,n)}n===t?a.reject(t,new TypeError("Cannot resolve promise with itself")):a.resolve(t,n)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,a.reject(t,e))}function i(e){r||(r=!0,a.resolve(t,e))}var s=p((function(){e(i,n)}));"error"===s.status&&n(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=c).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===s)return this;var r=new this.constructor(i);return this.state!==u?h(r,this.state===o?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){a.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){a.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},a.resolve=function(t,e){var r=p(f,e);if("error"===r.status)return a.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=o,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},a.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:a.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return a.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,u=-1,c=new this(i);++u<r;)l(t[u],u);return c;function l(t,i){e.resolve(t).then((function(t){s[i]=t,++o!==r||n||(n=!0,a.resolve(c,s))}),(function(t){n||(n=!0,a.reject(c,t))}))}},c.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var n,s=-1,o=new this(i);++s<e;)n=t[s],this.resolve(n).then((function(t){r||(r=!0,a.resolve(o,t))}),(function(t){r||(r=!0,a.reject(o,t))}));return o}},{immediate:36}],38:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),a=t("./utils/strings"),s=t("./zlib/messages"),o=t("./zlib/zstream"),u=Object.prototype.toString,c=0,l=-1,h=0,f=8;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==c)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=n.deflateSetDictionary(this.strm,p))!==c)throw new Error(s[r]);this._dict_set=!0}}function p(t,e){var r=new d(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}d.prototype.push=function(t,e){var r,s,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=a.string2buf(t):"[object ArrayBuffer]"===u.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(l),o.next_out=0,o.avail_out=l),1!==(r=n.deflate(o,s))&&r!==c)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):2!==s||(this.onEnd(c),!(o.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=d,r.deflate=p,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),a=t("./utils/strings"),s=t("./zlib/constants"),o=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),l=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}h.prototype.push=function(t,e){var r,o,u,c,h,f,d=this.strm,p=this.options.chunkSize,v=this.options.dictionary,m=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?d.input=a.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&v&&(f="string"==typeof v?a.string2buf(v):"[object ArrayBuffer]"===l.call(v)?new Uint8Array(v):v,r=n.inflateSetDictionary(this.strm,f)),r===s.Z_BUF_ERROR&&!0===m&&(r=s.Z_OK,m=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(d.output,d.next_out),c=d.next_out-u,h=a.buf2string(d.output,u),d.next_out=c,d.avail_out=p-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s}},a={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],42:[function(t,e,r){"use strict";var n=t("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function u(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,a,s,o=t.length,u=0;for(a=0;a<o;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=s=0;s<u;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,a,o=e||t.length,c=new Array(2*o);for(r=n=0;r<o;)if((i=t[r++])<128)c[n++]=i;else if(4<(a=s[i]))c[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;1<a&&r<o;)i=i<<6|63&t[r++],a--;1<a?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return u(c,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(i=i+e[n++]|0)|0,--s;);i%=65521,a%=65521}return i|a<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var a=n,s=i+r;t^=-1;for(var o=i;o<s;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}},{}],46:[function(t,e,r){"use strict";var n,i=t("../utils/common"),a=t("./trees"),s=t("./adler32"),o=t("./crc32"),u=t("./messages"),c=0,l=0,h=-2,f=2,d=8,p=286,v=30,m=19,y=2*p+1,g=15,b=3,_=258,k=_+b+1,w=42,x=113;function S(t,e){return t.msg=u[e],e}function E(t){return(t<<1)-(4<t?9:0)}function O(t){for(var e=t.length;0<=--e;)t[e]=0}function P(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function C(t,e){a._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,P(t.strm)}function T(t,e){t.pending_buf[t.pending++]=e}function A(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function j(t,e){var r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-k?t.strstart-(t.w_size-k):0,c=t.window,l=t.w_mask,h=t.prev,f=t.strstart+_,d=c[a+s-1],p=c[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(r=e)+s]===p&&c[r+s-1]===d&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<f);if(n=_-(f-a),a=f-_,s<n){if(t.match_start=e,o<=(s=n))break;d=c[a+s-1],p=c[a+s]}}}while((e=h[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function R(t){var e,r,n,a,u,c,l,h,f,d,p=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-k)){for(i.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=r=t.hash_size;n=t.head[--e],t.head[e]=p<=n?n-p:0,--r;);for(e=r=p;n=t.prev[--e],t.prev[e]=p<=n?n-p:0,--r;);a+=p}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,h=t.strstart+t.lookahead,d=void 0,(f=a)<(d=c.avail_in)&&(d=f),r=0===d?0:(c.avail_in-=d,i.arraySet(l,c.input,c.next_in,d,h),1===c.state.wrap?c.adler=s(c.adler,l,d,h):2===c.state.wrap&&(c.adler=o(c.adler,l,d,h)),c.next_in+=d,c.total_in+=d,d),t.lookahead+=r,t.lookahead+t.insert>=b)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+b-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<b)););}while(t.lookahead<k&&0!==t.strm.avail_in)}function z(t,e){for(var r,n;;){if(t.lookahead<k){if(R(t),t.lookahead<k&&e===c)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-k&&(t.match_length=j(t,r)),t.match_length>=b)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-b),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=b){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(C(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(C(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(C(t,!1),0===t.strm.avail_out)?1:2}function I(t,e){for(var r,n,i;;){if(t.lookahead<k){if(R(t),t.lookahead<k&&e===c)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=b&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=b-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-k&&(t.match_length=j(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===b&&4096<t.strstart-t.match_start)&&(t.match_length=b-1)),t.prev_length>=b&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-b,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-b),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+b-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=b-1,t.strstart++,n&&(C(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=a._tr_tally(t,0,t.window[t.strstart-1]))&&C(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<b-1?t.strstart:b-1,4===e?(C(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(C(t,!1),0===t.strm.avail_out)?1:2}function L(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function F(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*y),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*m+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(g+1),this.heap=new i.Buf16(2*p+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*p+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function D(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=f,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?w:x,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),l):S(t,h)}function B(t){var e=D(t);return e===l&&function(t){t.window_size=2*t.w_size,O(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=b-1,t.match_available=0,t.ins_h=0}(t.state),e}function N(t,e,r,n,a,s){if(!t)return h;var o=1;if(-1===e&&(e=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),a<1||9<a||r!==d||n<8||15<n||e<0||9<e||s<0||4<s)return S(t,h);8===n&&(n=9);var u=new F;return(t.state=u).strm=t,u.wrap=o,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+b-1)/b),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,B(t)}n=[new L(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(R(t),0===t.lookahead&&e===c)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,C(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-k&&(C(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(C(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(C(t,!1),t.strm.avail_out),1)})),new L(4,4,8,4,z),new L(4,5,16,8,z),new L(4,6,32,32,z),new L(4,4,16,16,I),new L(8,16,32,32,I),new L(8,16,128,128,I),new L(8,32,128,256,I),new L(32,128,258,1024,I),new L(32,258,258,4096,I)],r.deflateInit=function(t,e){return N(t,e,d,15,8,0)},r.deflateInit2=N,r.deflateReset=B,r.deflateResetKeep=D,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?h:(t.state.gzhead=e,l):h},r.deflate=function(t,e){var r,i,s,u;if(!t||!t.state||5<e||e<0)return t?S(t,h):h;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return S(t,0===t.avail_out?-5:h);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===w)if(2===i.wrap)t.adler=0,T(i,31),T(i,139),T(i,8),i.gzhead?(T(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),T(i,255&i.gzhead.time),T(i,i.gzhead.time>>8&255),T(i,i.gzhead.time>>16&255),T(i,i.gzhead.time>>24&255),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(T(i,255&i.gzhead.extra.length),T(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=o(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(T(i,0),T(i,0),T(i,0),T(i,0),T(i,0),T(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),T(i,3),i.status=x);else{var f=d+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=x,A(i,f),0!==i.strstart&&(A(i,t.adler>>>16),A(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),P(t),s=i.pending,i.pending!==i.pending_buf_size));)T(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),P(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,T(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),P(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,T(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&P(t),i.pending+2<=i.pending_buf_size&&(T(i,255&t.adler),T(i,t.adler>>8&255),t.adler=0,i.status=x)):i.status=x),0!==i.pending){if(P(t),0===t.avail_out)return i.last_flush=-1,l}else if(0===t.avail_in&&E(e)<=E(r)&&4!==e)return S(t,-5);if(666===i.status&&0!==t.avail_in)return S(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&666!==i.status){var p=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(R(t),0===t.lookahead)){if(e===c)return 1;break}if(t.match_length=0,r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(C(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(C(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(C(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,o=t.window;;){if(t.lookahead<=_){if(R(t),t.lookahead<=_&&e===c)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=b&&0<t.strstart&&(n=o[i=t.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=t.strstart+_;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=_-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=b?(r=a._tr_tally(t,1,t.match_length-b),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(C(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(C(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(C(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==p&&4!==p||(i.status=666),1===p||3===p)return 0===t.avail_out&&(i.last_flush=-1),l;if(2===p&&(1===e?a._tr_align(i):5!==e&&(a._tr_stored_block(i,0,0,!1),3===e&&(O(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),P(t),0===t.avail_out))return i.last_flush=-1,l}return 4!==e?l:i.wrap<=0?1:(2===i.wrap?(T(i,255&t.adler),T(i,t.adler>>8&255),T(i,t.adler>>16&255),T(i,t.adler>>24&255),T(i,255&t.total_in),T(i,t.total_in>>8&255),T(i,t.total_in>>16&255),T(i,t.total_in>>24&255)):(A(i,t.adler>>>16),A(i,65535&t.adler)),P(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?l:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==w&&69!==e&&73!==e&&91!==e&&103!==e&&e!==x&&666!==e?S(t,h):(t.state=null,e===x?S(t,-3):l):h},r.deflateSetDictionary=function(t,e){var r,n,a,o,u,c,f,d,p=e.length;if(!t||!t.state)return h;if(2===(o=(r=t.state).wrap)||1===o&&r.status!==w||r.lookahead)return h;for(1===o&&(t.adler=s(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===o&&(O(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,e,p-r.w_size,r.w_size,0),e=d,p=r.w_size),u=t.avail_in,c=t.next_in,f=t.input,t.avail_in=p,t.next_in=0,t.input=e,R(r);r.lookahead>=b;){for(n=r.strstart,a=r.lookahead-(b-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+b-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--a;);r.strstart=n,r.lookahead=b-1,R(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=b-1,r.match_available=0,t.next_in=c,t.input=f,t.avail_in=u,r.wrap=o,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,a,s,o,u,c,l,h,f,d,p,v,m,y,g,b,_,k,w,x,S,E,O;r=t.state,n=t.next_in,E=t.input,i=n+(t.avail_in-5),a=t.next_out,O=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,h=r.wnext,f=r.window,d=r.hold,p=r.bits,v=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,g=(1<<r.distbits)-1;t:do{p<15&&(d+=E[n++]<<p,p+=8,d+=E[n++]<<p,p+=8),b=v[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))O[a++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=v[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}k=65535&b,(_&=15)&&(p<_&&(d+=E[n++]<<p,p+=8),k+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=E[n++]<<p,p+=8,d+=E[n++]<<p,p+=8),b=m[d&g];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(w=65535&b,p<(_&=15)&&(d+=E[n++]<<p,(p+=8)<_&&(d+=E[n++]<<p,p+=8)),u<(w+=d&(1<<_)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,(_=a-s)<w){if(l<(_=w-_)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=f,(x=0)===h){if(x+=c-_,_<k){for(k-=_;O[a++]=f[x++],--_;);x=a-w,S=O}}else if(h<_){if(x+=c+h-_,(_-=h)<k){for(k-=_;O[a++]=f[x++],--_;);if(x=0,h<k){for(k-=_=h;O[a++]=f[x++],--_;);x=a-w,S=O}}}else if(x+=h-_,_<k){for(k-=_;O[a++]=f[x++],--_;);x=a-w,S=O}for(;2<k;)O[a++]=S[x++],O[a++]=S[x++],O[a++]=S[x++],k-=3;k&&(O[a++]=S[x++],1<k&&(O[a++]=S[x++]))}else{for(x=a-w;O[a++]=O[x++],O[a++]=O[x++],O[a++]=O[x++],2<(k-=3););k&&(O[a++]=O[x++],1<k&&(O[a++]=O[x++]))}break}}break}}while(n<i&&a<o);n-=k=p>>3,d&=(1<<(p-=k<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<o?o-a+257:257-(a-o),r.hold=d,r.bits=p}},{}],49:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),a=t("./crc32"),s=t("./inffast"),o=t("./inftrees"),u=0,c=-2,l=1,h=852,f=592;function d(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=l,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(h),e.distcode=e.distdyn=new n.Buf32(f),e.sane=1,e.back=-1,u):c}function m(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,v(t)):c}function y(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,m(t))):c}function g(t,e){var r,n;return t?(n=new p,(t.state=n).window=null,(r=y(t,e))!==u&&(t.state=null),r):c}var b,_,k=!0;function w(t){if(k){var e;for(b=new n.Buf32(512),_=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,b,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,_,0,t.work,{bits:5}),k=!1}t.lencode=b,t.lenbits=9,t.distcode=_,t.distbits=5}function x(t,e,r,i){var a,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(a=s.wsize-s.wnext)&&(a=i),n.arraySet(s.window,e,r-i,a,s.wnext),(i-=a)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}r.inflateReset=m,r.inflateReset2=y,r.inflateResetKeep=v,r.inflateInit=function(t){return g(t,15)},r.inflateInit2=g,r.inflate=function(t,e){var r,h,f,p,v,m,y,g,b,_,k,S,E,O,P,C,T,A,j,R,z,I,L,F,D=0,B=new n.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(r=t.state).mode&&(r.mode=13),v=t.next_out,f=t.output,y=t.avail_out,p=t.next_in,h=t.input,m=t.avail_in,g=r.hold,b=r.bits,_=m,k=y,I=u;t:for(;;)switch(r.mode){case l:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(2&r.wrap&&35615===g){B[r.check=0]=255&g,B[1]=g>>>8&255,r.check=a(r.check,B,2,0),b=g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(b-=4,z=8+(15&(g>>>=4)),0===r.wbits)r.wbits=z;else if(z>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<z,t.adler=r.check=1,r.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(B[0]=255&g,B[1]=g>>>8&255,r.check=a(r.check,B,2,0)),b=g=0,r.mode=3;case 3:for(;b<32;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.head&&(r.head.time=g),512&r.flags&&(B[0]=255&g,B[1]=g>>>8&255,B[2]=g>>>16&255,B[3]=g>>>24&255,r.check=a(r.check,B,4,0)),b=g=0,r.mode=4;case 4:for(;b<16;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(B[0]=255&g,B[1]=g>>>8&255,r.check=a(r.check,B,2,0)),b=g=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(B[0]=255&g,B[1]=g>>>8&255,r.check=a(r.check,B,2,0)),b=g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(m<(S=r.length)&&(S=m),S&&(r.head&&(z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,h,p,S,z)),512&r.flags&&(r.check=a(r.check,h,S,p)),m-=S,p+=S,r.length-=S),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break t;for(S=0;z=h[p+S++],r.head&&z&&r.length<65536&&(r.head.name+=String.fromCharCode(z)),z&&S<m;);if(512&r.flags&&(r.check=a(r.check,h,S,p)),m-=S,p+=S,z)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break t;for(S=0;z=h[p+S++],r.head&&z&&r.length<65536&&(r.head.comment+=String.fromCharCode(z)),z&&S<m;);if(512&r.flags&&(r.check=a(r.check,h,S,p)),m-=S,p+=S,z)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}b=g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}t.adler=r.check=d(g),b=g=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=v,t.avail_out=y,t.next_in=p,t.avail_in=m,r.hold=g,r.bits=b,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}switch(r.last=1&g,b-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6!==e)break;g>>>=2,b-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,b=g=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(S=r.length){if(m<S&&(S=m),y<S&&(S=y),0===S)break t;n.arraySet(f,h,p,S,v),m-=S,p+=S,y-=S,v+=S,r.length-=S;break}r.mode=12;break;case 17:for(;b<14;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(r.nlen=257+(31&g),g>>>=5,b-=5,r.ndist=1+(31&g),g>>>=5,b-=5,r.ncode=4+(15&g),g>>>=4,b-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.lens[N[r.have++]]=7&g,g>>>=3,b-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},I=o(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,I){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;C=(D=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,T=65535&D,!((P=D>>>24)<=b);){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(T<16)g>>>=P,b-=P,r.lens[r.have++]=T;else{if(16===T){for(F=P+2;b<F;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(g>>>=P,b-=P,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}z=r.lens[r.have-1],S=3+(3&g),g>>>=2,b-=2}else if(17===T){for(F=P+3;b<F;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}b-=P,z=0,S=3+(7&(g>>>=P)),g>>>=3,b-=3}else{for(F=P+7;b<F;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}b-=P,z=0,S=11+(127&(g>>>=P)),g>>>=7,b-=7}if(r.have+S>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=z}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},I=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,I){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},I=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,I){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=m&&258<=y){t.next_out=v,t.avail_out=y,t.next_in=p,t.avail_in=m,r.hold=g,r.bits=b,s(t,k),v=t.next_out,f=t.output,y=t.avail_out,p=t.next_in,h=t.input,m=t.avail_in,g=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;C=(D=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,T=65535&D,!((P=D>>>24)<=b);){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(C&&0==(240&C)){for(A=P,j=C,R=T;C=(D=r.lencode[R+((g&(1<<A+j)-1)>>A)])>>>16&255,T=65535&D,!(A+(P=D>>>24)<=b);){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}g>>>=A,b-=A,r.back+=A}if(g>>>=P,b-=P,r.back+=P,r.length=T,0===C){r.mode=26;break}if(32&C){r.back=-1,r.mode=12;break}if(64&C){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&C,r.mode=22;case 22:if(r.extra){for(F=r.extra;b<F;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;C=(D=r.distcode[g&(1<<r.distbits)-1])>>>16&255,T=65535&D,!((P=D>>>24)<=b);){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(0==(240&C)){for(A=P,j=C,R=T;C=(D=r.distcode[R+((g&(1<<A+j)-1)>>A)])>>>16&255,T=65535&D,!(A+(P=D>>>24)<=b);){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}g>>>=A,b-=A,r.back+=A}if(g>>>=P,b-=P,r.back+=P,64&C){t.msg="invalid distance code",r.mode=30;break}r.offset=T,r.extra=15&C,r.mode=24;case 24:if(r.extra){for(F=r.extra;b<F;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===y)break t;if(S=k-y,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}E=S>r.wnext?(S-=r.wnext,r.wsize-S):r.wnext-S,S>r.length&&(S=r.length),O=r.window}else O=f,E=v-r.offset,S=r.length;for(y<S&&(S=y),y-=S,r.length-=S;f[v++]=O[E++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===y)break t;f[v++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===m)break t;m--,g|=h[p++]<<b,b+=8}if(k-=y,t.total_out+=k,r.total+=k,k&&(t.adler=r.check=r.flags?a(r.check,f,k,v-k):i(r.check,f,k,v-k)),k=y,(r.flags?g:d(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}b=g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===m)break t;m--,g+=h[p++]<<b,b+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}b=g=0}r.mode=29;case 29:I=1;break t;case 30:I=-3;break t;case 31:return-4;default:return c}return t.next_out=v,t.avail_out=y,t.next_in=p,t.avail_in=m,r.hold=g,r.bits=b,(r.wsize||k!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&x(t,t.output,t.next_out,k-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,k-=t.avail_out,t.total_in+=_,t.total_out+=k,r.total+=k,r.wrap&&k&&(t.adler=r.check=r.flags?a(r.check,f,k,t.next_out-k):i(r.check,f,k,t.next_out-k)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==_&&0===k||4===e)&&I===u&&(I=-5),I)},r.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,u},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?c:((r.head=e).done=!1,u):c},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?c:11===r.mode&&i(1,e,n,0)!==r.check?-3:x(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,u):c},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,c,l,h,f){var d,p,v,m,y,g,b,_,k,w=f.bits,x=0,S=0,E=0,O=0,P=0,C=0,T=0,A=0,j=0,R=0,z=null,I=0,L=new n.Buf16(16),F=new n.Buf16(16),D=null,B=0;for(x=0;x<=15;x++)L[x]=0;for(S=0;S<u;S++)L[e[r+S]]++;for(P=w,O=15;1<=O&&0===L[O];O--);if(O<P&&(P=O),0===O)return c[l++]=20971520,c[l++]=20971520,f.bits=1,0;for(E=1;E<O&&0===L[E];E++);for(P<E&&(P=E),x=A=1;x<=15;x++)if(A<<=1,(A-=L[x])<0)return-1;if(0<A&&(0===t||1!==O))return-1;for(F[1]=0,x=1;x<15;x++)F[x+1]=F[x]+L[x];for(S=0;S<u;S++)0!==e[r+S]&&(h[F[e[r+S]]++]=S);if(g=0===t?(z=D=h,19):1===t?(z=i,I-=257,D=a,B-=257,256):(z=s,D=o,-1),x=E,y=l,T=S=R=0,v=-1,m=(j=1<<(C=P))-1,1===t&&852<j||2===t&&592<j)return 1;for(;;){for(b=x-T,k=h[S]<g?(_=0,h[S]):h[S]>g?(_=D[B+h[S]],z[I+h[S]]):(_=96,0),d=1<<x-T,E=p=1<<C;c[y+(R>>T)+(p-=d)]=b<<24|_<<16|k|0,0!==p;);for(d=1<<x-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,S++,0==--L[x]){if(x===O)break;x=e[r+h[S]]}if(P<x&&(R&m)!==v){for(0===T&&(T=P),y+=E,A=1<<(C=x-T);C+T<O&&!((A-=L[C+T])<=0);)C++,A<<=1;if(j+=1<<C,1===t&&852<j||2===t&&592<j)return 1;c[v=R&m]=P<<24|C<<16|y-l|0}}return 0!==R&&(c[y+R]=x-T<<24|64<<16|0),f.bits=P,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var a=256,s=286,o=30,u=15,c=16,l=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var v=new Array(60);i(v);var m=new Array(512);i(m);var y=new Array(256);i(y);var g=new Array(29);i(g);var b,_,k,w=new Array(o);function x(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?m[t]:m[256+(t>>>7)]}function O(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>c-r?(t.bi_buf|=e<<t.bi_valid&65535,O(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=r-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function C(t,e,r){P(t,r[2*e],r[2*e+1])}function T(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function A(t,e,r){var n,i,a=new Array(u+1),s=0;for(n=1;n<=u;n++)a[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=T(a[o]++,o))}}function j(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<o;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function R(t){8<t.bi_valid?O(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function z(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function I(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&z(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!z(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function L(t,e,r){var n,i,s,o,u=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===n?C(t,i,e):(C(t,(s=y[i])+a+1,e),0!==(o=l[s])&&P(t,i-=g[s],o),C(t,s=E(--n),r),0!==(o=h[s])&&P(t,n-=w[s],o)),u<t.last_lit;);C(t,256,e)}function F(t,e){var r,n,i,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<c;r++)0!==a[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;1<=r;r--)I(t,a,r);for(i=c;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,I(t,a,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,a,s,o,c=e.dyn_tree,l=e.max_code,h=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,v=e.stat_desc.max_length,m=0;for(a=0;a<=u;a++)t.bl_count[a]=0;for(c[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)v<(a=c[2*c[2*(n=t.heap[r])+1]+1]+1)&&(a=v,m++),c[2*n+1]=a,l<n||(t.bl_count[a]++,s=0,p<=n&&(s=d[n-p]),o=c[2*n],t.opt_len+=o*(a+s),f&&(t.static_len+=o*(h[2*n+1]+s)));if(0!==m){do{for(a=v-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[v]--,m-=2}while(0<m);for(a=v;0!==a;a--)for(n=t.bl_count[a];0!==n;)l<(i=t.heap[--r])||(c[2*i+1]!==a&&(t.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),n--)}}(t,e),A(a,l,t.bl_count)}function D(t,e,r){var n,i,a=-1,s=e[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++o<u&&i===s||(o<c?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function B(t,e,r){var n,i,a=-1,s=e[1],o=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++o<u&&i===s)){if(o<c)for(;C(t,i,t.bl_tree),0!=--o;);else 0!==i?(i!==a&&(C(t,i,t.bl_tree),o--),C(t,16,t.bl_tree),P(t,o-3,2)):o<=10?(C(t,17,t.bl_tree),P(t,o-3,3)):(C(t,18,t.bl_tree),P(t,o-11,7));a=i,c=(o=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}i(w);var N=!1;function U(t,e,r,i){P(t,0+(i?1:0),3),function(t,e,r,i){R(t),O(t,r),O(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}r._tr_init=function(t){N||(function(){var t,e,r,n,i,a=new Array(u+1);for(n=r=0;n<28;n++)for(g[n]=r,t=0;t<1<<l[n];t++)y[r++]=n;for(y[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,t=0;t<1<<h[n];t++)m[i++]=n;for(i>>=7;n<o;n++)for(w[n]=i<<7,t=0;t<1<<h[n]-7;t++)m[256+i++]=n;for(e=0;e<=u;e++)a[e]=0;for(t=0;t<=143;)p[2*t+1]=8,t++,a[8]++;for(;t<=255;)p[2*t+1]=9,t++,a[9]++;for(;t<=279;)p[2*t+1]=7,t++,a[7]++;for(;t<=287;)p[2*t+1]=8,t++,a[8]++;for(A(p,287,a),t=0;t<o;t++)v[2*t+1]=5,v[2*t]=T(t,5);b=new x(p,l,257,s,u),_=new x(v,h,0,o,u),k=new x(new Array(0),f,0,19,7)}(),N=!0),t.l_desc=new S(t.dyn_ltree,b),t.d_desc=new S(t.dyn_dtree,_),t.bl_desc=new S(t.bl_tree,k),t.bi_buf=0,t.bi_valid=0,j(t)},r._tr_stored_block=U,r._tr_flush_block=function(t,e,r,n){var i,s,o=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),o=function(t){var e;for(D(t,t.dyn_ltree,t.l_desc.max_code),D(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*d[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?U(t,e,r,n):4===t.strategy||s===i?(P(t,2+(n?1:0),3),L(t,p,v)):(P(t,4+(n?1:0),3),function(t,e,r,n){var i;for(P(t,e-257,5),P(t,r-1,5),P(t,n-4,4),i=0;i<n;i++)P(t,t.bl_tree[2*d[i]+1],3);B(t,t.dyn_ltree,e-1),B(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),L(t,t.dyn_ltree,t.dyn_dtree)),j(t),n&&R(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(y[r]+a+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),C(t,256,p),function(t){16===t.bi_valid?(O(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){(function(t){!function(t,e){"use strict";if(!t.setImmediate){var r,n,i,a,s=1,o={},u=!1,c=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,r="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){f(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?(a="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",d,!1):t.attachEvent("onmessage",d),function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){f(t.data)},function(t){i.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,function(t){var e=c.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):function(t){setTimeout(f,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return o[s]=i,r(s),s++},l.clearImmediate=h}function h(t){delete o[t]}function f(t){if(u)setTimeout(f,0,t);else{var r=o[t];if(r){u=!0;try{!function(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(e,n)}}(r)}finally{h(t),u=!1}}}}function d(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},2473:t=>{var e,r,n=9007199254740991,i="[object Function]",a="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/,o=Object.prototype,u=o.hasOwnProperty,c=o.toString,l=o.propertyIsEnumerable,h=(e=Object.keys,r=Object,function(t){return e(r(t))}),f=Math.max,d=!l.call({valueOf:1},"valueOf");function p(t,e,r){var n=t[e];u.call(t,e)&&y(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function v(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||s.test(t))&&t>-1&&t%1==0&&t<e}function m(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||o)}function y(t,e){return t===e||t!=t&&e!=e}var g=Array.isArray;function b(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!function(t){var e=_(t)?c.call(t):"";return e==i||e==a}(t)}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var k,w=(k=function(t,e){if(d||m(e)||b(e))!function(t,e,r,n){r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i];p(r,s,t[s])}}(e,function(t){return b(t)?function(t,e){var r=g(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&b(t)}(t)&&u.call(t,"callee")&&(!l.call(t,"callee")||"[object Arguments]"==c.call(t))}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var a in t)!e&&!u.call(t,a)||i&&("length"==a||v(a,n))||r.push(a);return r}(t):function(t){if(!m(t))return h(t);var e=[];for(var r in Object(t))u.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}(e),t);else for(var r in e)u.call(e,r)&&p(t,r,e[r])},function(t,e){return e=f(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=f(r.length-e,0),a=Array(i);++n<i;)a[n]=r[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=r[n];return s[e]=a,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,s)}}((function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:void 0,a=n>2?e[2]:void 0;for(i=k.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(t,e,r){if(!_(r))return!1;var n=typeof e;return!!("number"==n?b(r)&&v(e,r.length):"string"==n&&e in r)&&y(r[e],t)}(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var s=e[r];s&&k(t,s)}return t})));t.exports=w},6146:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",s="[object AsyncFunction]",o="[object Function]",u="[object GeneratorFunction]",c="[object Null]",l="[object Object]",h="[object Proxy]",f="[object Undefined]",d=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[a]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v[o]=v["[object Map]"]=v["[object Number]"]=v[l]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var m="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=e&&!e.nodeType&&e,_=b&&t&&!t.nodeType&&t,k=_&&_.exports===b,w=k&&m.process,x=function(){try{return _&&_.require&&_.require("util").types||w&&w.binding&&w.binding("util")}catch(t){}}(),S=x&&x.isTypedArray;function E(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var O,P,C,T=Array.prototype,A=Function.prototype,j=Object.prototype,R=g["__core-js_shared__"],z=A.toString,I=j.hasOwnProperty,L=(O=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",F=j.toString,D=z.call(Object),B=RegExp("^"+z.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=k?g.Buffer:void 0,U=g.Symbol,M=g.Uint8Array,G=(N&&N.allocUnsafe,P=Object.getPrototypeOf,C=Object,function(t){return P(C(t))}),W=Object.create,Z=j.propertyIsEnumerable,V=T.splice,H=U?U.toStringTag:void 0,q=function(){try{var t=mt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),X=N?N.isBuffer:void 0,Y=Math.max,J=Date.now,K=mt(g,"Map"),$=mt(Object,"create"),Q=function(){function t(){}return function(e){if(!Ct(e))return{};if(W)return W(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function rt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function nt(t){var e=this.__data__=new et(t);this.size=e.size}function it(t,e,r){(void 0!==r&&!kt(t[e],r)||void 0===r&&!(e in t))&&ot(t,e,r)}function at(t,e,r){var n=t[e];I.call(t,e)&&kt(n,r)&&(void 0!==r||e in t)||ot(t,e,r)}function st(t,e){for(var r=t.length;r--;)if(kt(t[r][0],e))return r;return-1}function ot(t,e,r){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}tt.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},tt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},tt.prototype.get=function(t){var e=this.__data__;if($){var r=e[t];return r===n?void 0:r}return I.call(e,t)?e[t]:void 0},tt.prototype.has=function(t){var e=this.__data__;return $?void 0!==e[t]:I.call(e,t)},tt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=$&&void 0===e?n:e,this},et.prototype.clear=function(){this.__data__=[],this.size=0},et.prototype.delete=function(t){var e=this.__data__,r=st(e,t);return!(r<0||(r==e.length-1?e.pop():V.call(e,r,1),--this.size,0))},et.prototype.get=function(t){var e=this.__data__,r=st(e,t);return r<0?void 0:e[r][1]},et.prototype.has=function(t){return st(this.__data__,t)>-1},et.prototype.set=function(t,e){var r=this.__data__,n=st(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},rt.prototype.clear=function(){this.size=0,this.__data__={hash:new tt,map:new(K||et),string:new tt}},rt.prototype.delete=function(t){var e=vt(this,t).delete(t);return this.size-=e?1:0,e},rt.prototype.get=function(t){return vt(this,t).get(t)},rt.prototype.has=function(t){return vt(this,t).has(t)},rt.prototype.set=function(t,e){var r=vt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},nt.prototype.clear=function(){this.__data__=new et,this.size=0},nt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},nt.prototype.get=function(t){return this.__data__.get(t)},nt.prototype.has=function(t){return this.__data__.has(t)},nt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof et){var n=r.__data__;if(!K||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new rt(n)}return r.set(t,e),this.size=r.size,this};var ut=function(t,e,r){for(var n=-1,i=Object(t),a=r(t),s=a.length;s--;){var o=a[++n];if(!1===e(i[o],o,i))break}return t};function ct(t){return null==t?void 0===t?f:c:H&&H in Object(t)?function(t){var e=I.call(t,H),r=t[H];try{t[H]=void 0;var n=!0}catch(t){}var i=F.call(t);return n&&(e?t[H]=r:delete t[H]),i}(t):function(t){return F.call(t)}(t)}function lt(t){return Tt(t)&&ct(t)==a}function ht(t,e,r,n,i){t!==e&&ut(e,(function(a,s){if(i||(i=new nt),Ct(a))!function(t,e,r,n,i,a,s){var o=bt(t,r),u=bt(e,r),c=s.get(u);if(c)it(t,r,c);else{var h,f,d,p,v,m=a?a(o,u,r+"",t,e,s):void 0,y=void 0===m;if(y){var g=xt(u),b=!g&&Et(u),_=!g&&!b&&At(u);m=u,g||b||_?xt(o)?m=o:Tt(v=o)&&St(v)?m=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(o):b?(y=!1,m=function(t,e){return t.slice()}(u)):_?(y=!1,p=new(d=(h=u).buffer).constructor(d.byteLength),new M(p).set(new M(d)),f=p,m=new h.constructor(f,h.byteOffset,h.length)):m=[]:function(t){if(!Tt(t)||ct(t)!=l)return!1;var e=G(t);if(null===e)return!0;var r=I.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&z.call(r)==D}(u)||wt(u)?(m=o,wt(o)?m=function(t){return function(t,e,r,n){var i=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var o=e[a],u=void 0;void 0===u&&(u=t[o]),i?ot(r,o,u):at(r,o,u)}return r}(t,Rt(t))}(o):Ct(o)&&!Ot(o)||(m=function(t){return"function"!=typeof t.constructor||gt(t)?{}:Q(G(t))}(u))):y=!1}y&&(s.set(u,m),i(m,u,n,a,s),s.delete(u)),it(t,r,m)}}(t,e,s,r,ht,n,i);else{var o=n?n(bt(t,s),a,s+"",t,e,i):void 0;void 0===o&&(o=a),it(t,s,o)}}),Rt)}function ft(t,e){return _t(function(t,e,r){return e=Y(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=Y(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),E(t,this,o)}}(t,e,Lt),t+"")}var dt=q?function(t,e){return q(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:Lt;function pt(t,e,r,n,i,a){return Ct(t)&&Ct(e)&&(a.set(e,t),ht(t,e,void 0,pt,a),a.delete(e)),t}function vt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function mt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ct(t)||function(t){return!!L&&L in t}(t))&&(Ot(t)?B:d).test(function(t){if(null!=t){try{return z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}function yt(t,e){var r=typeof t;return!!(e=null==e?i:e)&&("number"==r||"symbol"!=r&&p.test(t))&&t>-1&&t%1==0&&t<e}function gt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||j)}function bt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var _t=function(t){var e=0,r=0;return function(){var n=J(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(dt);function kt(t,e){return t===e||t!=t&&e!=e}var wt=lt(function(){return arguments}())?lt:function(t){return Tt(t)&&I.call(t,"callee")&&!Z.call(t,"callee")},xt=Array.isArray;function St(t){return null!=t&&Pt(t.length)&&!Ot(t)}var Et=X||function(){return!1};function Ot(t){if(!Ct(t))return!1;var e=ct(t);return e==o||e==u||e==s||e==h}function Pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Ct(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Tt(t){return null!=t&&"object"==typeof t}var At=S?function(t){return function(e){return t(e)}}(S):function(t){return Tt(t)&&Pt(t.length)&&!!v[ct(t)]},jt=ft((function(t){return t.push(void 0,pt),E(It,void 0,t)}));function Rt(t){return St(t)?function(t,e){var r=xt(t),n=!r&&wt(t),i=!r&&!n&&Et(t),a=!r&&!n&&!i&&At(t),s=r||n||i||a,o=s?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=o.length;for(var c in t)!e&&!I.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yt(c,u))||o.push(c);return o}(t,!0):function(t){if(!Ct(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=gt(t),r=[];for(var n in t)("constructor"!=n||!e&&I.call(t,n))&&r.push(n);return r}(t)}var zt,It=(zt=function(t,e,r,n){ht(t,e,r,n)},ft((function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:void 0,a=n>2?e[2]:void 0;for(i=zt.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(t,e,r){if(!Ct(r))return!1;var n=typeof e;return!!("number"==n?St(r)&&yt(e,r.length):"string"==n&&e in r)&&kt(r[e],t)}(e[0],e[1],a)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var s=e[r];s&&zt(t,s,r,i)}return t})));function Lt(t){return t}t.exports=jt},9052:t=>{var e,r,n=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/,u=Object.prototype,c=u.hasOwnProperty,l=u.toString,h=u.propertyIsEnumerable,f=(e=Object.keys,r=Object,function(t){return e(r(t))});function d(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}var p=Array.isArray;function v(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?l.call(t):"";return e==a||e==s}(t)}function m(t){return v(t)?function(t,e){var r=p(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&v(t)}(t)&&c.call(t,"callee")&&(!h.call(t,"callee")||l.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,a=!!n;for(var s in t)!e&&!c.call(t,s)||a&&("length"==s||d(s,n))||r.push(s);return r}(t):function(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||u))return f(t);var e,r,n=[];for(var i in Object(t))c.call(t,i)&&"constructor"!=i&&n.push(i);return n}(t)}function y(t){return t}t.exports=function(t,e){return t&&function(t,e){return t&&function(t,e,r){for(var n=-1,i=Object(t),a=r(t),s=a.length;s--;){var o=a[++n];if(!1===e(i[o],o,i))break}return t}(t,e,m)}(t,"function"==typeof e?e:y)}},5111:(t,e,r)=>{"use strict";var n=r(9666);t.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!n(t)}},4617:(t,e,r)=>{"use strict";var n=r(1102),i={object:!0,function:!0,undefined:!0};t.exports=function(t){return!!n(t)&&hasOwnProperty.call(i,typeof t)}},2307:(t,e,r)=>{"use strict";var n=r(5111),i=/^\s*class[\s{/}]/,a=Function.prototype.toString;t.exports=function(t){return!!n(t)&&!i.test(a.call(t))}},9666:(t,e,r)=>{"use strict";var n=r(4617);t.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},1102:t=>{"use strict";t.exports=function(t){return null!=t}},1583:(t,e,r)=>{var n=r(5556);t.exports=n},3132:(t,e,r)=>{var n=r(7382);t.exports=n},542:(t,e,r)=>{var n=r(3123);t.exports=n},44:(t,e,r)=>{var n=r(2446);t.exports=n},8554:(t,e,r)=>{var n=r(4436),i=r(4270);function a(t,e,r,n){if(n){var a=n[e];if(i(a))a.unhook&&a.unhook(t,e,r);else if("attributes"===e)for(var s in a)t.removeAttribute(s);else if("style"===e)for(var o in a)t.style[o]="";else t[e]="string"==typeof a?"":null}}function s(t,e,r,i,a){var s=r?r[i]:void 0;if("attributes"!==i)if(s&&n(s)&&o(s)!==o(a))t[i]=a;else{n(t[i])||(t[i]={});var u="style"===i?"":void 0;for(var c in a){var l=a[c];t[i][c]=void 0===l?u:l}}else for(var h in a){var f=a[h];void 0===f?t.removeAttribute(h):t.setAttribute(h,f)}}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function(t,e,r){for(var o in e){var u=e[o];void 0===u?a(t,o,u,r):i(u)?(a(t,o,u,r),u.hook&&u.hook(t,o,r?r[o]:void 0)):n(u)?s(t,0,r,o,u):t[o]=u}}},5556:(t,e,r)=>{var n=r(474),i=r(8554),a=r(9683),s=r(2592),o=r(7127),u=r(1575);t.exports=function t(e,r){var c=r&&r.document||n,l=r?r.warn:null;if(e=u(e).a,o(e))return e.init();if(s(e))return c.createTextNode(e.text);if(!a(e))return l&&l("Item is not a valid virtual dom node",e),null;var h=null===e.namespace?c.createElement(e.tagName):c.createElementNS(e.namespace,e.tagName),f=e.properties;i(h,f);for(var d=e.children,p=0;p<d.length;p++){var v=t(d[p],r);v&&h.appendChild(v)}return h}},476:t=>{var e={};function r(t,i,a,s,o){if(s=s||{},t){n(a,o,o)&&(s[o]=t);var u=i.children;if(u)for(var c=t.childNodes,l=0;l<i.children.length;l++){o+=1;var h=u[l]||e,f=o+(h.count||0);n(a,o,f)&&r(c[l],h,a,s,o),o=f}}return s}function n(t,e,r){if(0===t.length)return!1;for(var n,i,a=0,s=t.length-1;a<=s;){if(i=t[n=(s+a)/2>>0],a===s)return i>=e&&i<=r;if(i<e)a=n+1;else{if(!(i>r))return!0;s=n-1}}return!1}function i(t,e){return t>e?1:-1}t.exports=function(t,e,n,a){return n&&0!==n.length?(n.sort(i),r(t,e,n,a,0)):{}}},4345:(t,e,r)=>{var n=r(8554),i=r(7127),a=r(8248),s=r(9243);function o(t,e){"function"==typeof e.destroy&&i(e)&&e.destroy(t)}t.exports=function(t,e,r){var i,u,c=t.type,l=t.vNode,h=t.patch;switch(c){case a.REMOVE:return function(t,e){var r=t.parentNode;return r&&r.removeChild(t),o(t,e),null}(e,l);case a.INSERT:return function(t,e,r){var n=r.render(e,r);return t&&t.appendChild(n),t}(e,h,r);case a.VTEXT:return function(t,e,r,n){var i;if(3===t.nodeType)t.replaceData(0,t.length,r.text),i=t;else{var a=t.parentNode;i=n.render(r,n),a&&i!==t&&a.replaceChild(i,t)}return i}(e,0,h,r);case a.WIDGET:return function(t,e,r,n){var i,a=s(e,r);i=a?r.update(e,t)||t:n.render(r,n);var u=t.parentNode;return u&&i!==t&&u.replaceChild(i,t),a||o(t,e),i}(e,l,h,r);case a.VNODE:return function(t,e,r,n){var i=t.parentNode,a=n.render(r,n);return i&&a!==t&&i.replaceChild(a,t),a}(e,0,h,r);case a.ORDER:return function(t,e){for(var r,n,i,a=t.childNodes,s={},o=0;o<e.removes.length;o++)r=a[(n=e.removes[o]).from],n.key&&(s[n.key]=r),t.removeChild(r);for(var u=a.length,c=0;c<e.inserts.length;c++)r=s[(i=e.inserts[c]).key],t.insertBefore(r,i.to>=u++?null:a[i.to])}(e,h),e;case a.PROPS:return n(e,h,l.properties),e;case a.THUNK:return i=e,u=r.patch(e,h,r),i&&u&&i!==u&&i.parentNode&&i.parentNode.replaceChild(u,i),u;default:return e}}},2446:(t,e,r)=>{var n=r(474),i=r(8722),a=r(5556),s=r(476),o=r(4345);function u(t,e,r){var i=function(t){var e=[];for(var r in t)"a"!==r&&e.push(Number(r));return e}(e);if(0===i.length)return t;var a=s(t,e.a,i),o=t.ownerDocument;r.document||o===n||(r.document=o);for(var u=0;u<i.length;u++){var l=i[u];t=c(t,a[l],e[l],r)}return t}function c(t,e,r,n){if(!e)return t;var a;if(i(r))for(var s=0;s<r.length;s++)a=o(r[s],e,n),e===t&&(t=a);else a=o(r,e,n),e===t&&(t=a);return t}t.exports=function t(e,r,n){return(n=n||{}).patch=n.patch&&n.patch!==t?n.patch:u,n.render=n.render||a,n.patch(e,r,n)}},9243:(t,e,r)=>{var n=r(7127);t.exports=function(t,e){return!(!n(t)||!n(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}},2796:(t,e,r)=>{"use strict";var n=r(9401);function i(t){if(!(this instanceof i))return new i(t);this.value=t}t.exports=i,i.prototype.hook=function(t,e){n(t)[e.substr(3)]=this.value},i.prototype.unhook=function(t,e){n(t)[e.substr(3)]=void 0}},3726:t=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this.value=t}t.exports=e,e.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},3123:(t,e,r)=>{"use strict";var n=r(8722),i=r(9327),a=r(6181),s=r(9683),o=r(2592),u=r(7127),c=r(4270),l=r(5483),h=r(7303),f=r(3726),d=r(2796);function p(t,e,r,i){if("string"==typeof t)e.push(new a(t));else if("number"==typeof t)e.push(new a(String(t)));else if(v(t))e.push(t);else{if(!n(t)){if(null==t)return;throw o={foreignObject:t,parentVnode:{tagName:r,properties:i}},(u=new Error).type="virtual-hyperscript.unexpected.virtual-element",u.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+m(o.foreignObject)+".\nThe parent vnode is:\n"+m(o.parentVnode),u.foreignObject=o.foreignObject,u.parentVnode=o.parentVnode,u}for(var s=0;s<t.length;s++)p(t[s],e,r,i)}var o,u}function v(t){return s(t)||o(t)||u(t)||l(t)}function m(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}t.exports=function(t,e,r){var a,s,o,u,l,m=[];return!r&&("string"==typeof(l=e)||n(l)||v(l))&&(r=e,s={}),a=h(t,s=s||e||{}),s.hasOwnProperty("key")&&(o=s.key,s.key=void 0),s.hasOwnProperty("namespace")&&(u=s.namespace,s.namespace=void 0),"INPUT"!==a||u||!s.hasOwnProperty("value")||void 0===s.value||c(s.value)||(s.value=f(s.value)),function(t){for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];if(c(r))continue;"ev-"===e.substr(0,3)&&(t[e]=d(r))}}(s),null!=r&&p(r,m,a,s),new i(a,s,m,o,u)}},7303:(t,e,r)=>{"use strict";var n=r(8098),i=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,a=/^\.|#/;t.exports=function(t,e){if(!t)return"DIV";var r,s,o,u,c=!e.hasOwnProperty("id"),l=n(t,i),h=null;for(a.test(l[1])&&(h="DIV"),u=0;u<l.length;u++)(s=l[u])&&(o=s.charAt(0),h?"."===o?(r=r||[]).push(s.substring(1,s.length)):"#"===o&&c&&(e.id=s.substring(1,s.length)):h=s);return r&&(e.className&&r.push(e.className),e.className=r.join(" ")),e.namespace?h:h.toUpperCase()}},1575:(t,e,r)=>{var n=r(9683),i=r(2592),a=r(7127),s=r(5483);function o(t,e){var r=t.vnode;if(r||(r=t.vnode=t.render(e)),!(n(r)||i(r)||a(r)))throw new Error("thunk did not return a valid node");return r}t.exports=function(t,e){var r=t,n=e;return s(e)&&(n=o(e,t)),s(t)&&(r=o(t,null)),{a:r,b:n}}},5483:t=>{t.exports=function(t){return t&&"Thunk"===t.type}},4270:t=>{t.exports=function(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}},9683:(t,e,r)=>{var n=r(9289);t.exports=function(t){return t&&"VirtualNode"===t.type&&t.version===n}},2592:(t,e,r)=>{var n=r(9289);t.exports=function(t){return t&&"VirtualText"===t.type&&t.version===n}},7127:t=>{t.exports=function(t){return t&&"Widget"===t.type}},9289:t=>{t.exports="2"},9327:(t,e,r)=>{var n=r(9289),i=r(9683),a=r(7127),s=r(5483),o=r(4270);t.exports=l;var u={},c=[];function l(t,e,r,n,l){this.tagName=t,this.properties=e||u,this.children=r||c,this.key=null!=n?String(n):void 0,this.namespace="string"==typeof l?l:null;var h,f=r&&r.length||0,d=0,p=!1,v=!1,m=!1;for(var y in e)if(e.hasOwnProperty(y)){var g=e[y];o(g)&&g.unhook&&(h||(h={}),h[y]=g)}for(var b=0;b<f;b++){var _=r[b];i(_)?(d+=_.count||0,!p&&_.hasWidgets&&(p=!0),!v&&_.hasThunks&&(v=!0),m||!_.hooks&&!_.descendantHooks||(m=!0)):!p&&a(_)?"function"==typeof _.destroy&&(p=!0):!v&&s(_)&&(v=!0)}this.count=f+d,this.hasWidgets=p,this.hasThunks=v,this.hooks=h,this.descendantHooks=m}l.prototype.version=n,l.prototype.type="VirtualNode"},8248:(t,e,r)=>{var n=r(9289);function i(t,e,r){this.type=Number(t),this.vNode=e,this.patch=r}i.NONE=0,i.VTEXT=1,i.VNODE=2,i.WIDGET=3,i.PROPS=4,i.ORDER=5,i.INSERT=6,i.REMOVE=7,i.THUNK=8,t.exports=i,i.prototype.version=n,i.prototype.type="VirtualPatch"},6181:(t,e,r)=>{var n=r(9289);function i(t){this.text=String(t)}t.exports=i,i.prototype.version=n,i.prototype.type="VirtualText"},2416:(t,e,r)=>{var n=r(4436),i=r(4270);function a(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}t.exports=function t(e,r){var s;for(var o in e){o in r||((s=s||{})[o]=void 0);var u=e[o],c=r[o];if(u!==c)if(n(u)&&n(c))if(a(c)!==a(u))(s=s||{})[o]=c;else if(i(c))(s=s||{})[o]=c;else{var l=t(u,c);l&&((s=s||{})[o]=l)}else(s=s||{})[o]=c}for(var h in r)h in e||((s=s||{})[h]=r[h]);return s}},7382:(t,e,r)=>{var n=r(8722),i=r(8248),a=r(9683),s=r(2592),o=r(7127),u=r(5483),c=r(1575),l=r(2416);function h(t,e){var r={a:t};return f(t,e,r,0),r}function f(t,e,r,n){if(t!==e){var c=r[n],h=!1;if(u(t)||u(e))v(t,e,r,n);else if(null==e)o(t)||(d(t,r,n),c=r[n]),c=b(c,new i(i.REMOVE,t,e));else if(a(e))if(a(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var p=l(t.properties,e.properties);p&&(c=b(c,new i(i.PROPS,t,p))),c=function(t,e,r,n,s){for(var o=t.children,u=function(t,e){var r=g(e),n=r.keys,i=r.free;if(i.length===e.length)return{children:e,moves:null};var a=g(t),s=a.keys;if(a.free.length===t.length)return{children:e,moves:null};for(var o=[],u=0,c=i.length,l=0,h=0;h<t.length;h++){var f,d=t[h];d.key?n.hasOwnProperty(d.key)?(f=n[d.key],o.push(e[f])):(f=h-l++,o.push(null)):u<c?(f=i[u++],o.push(e[f])):(f=h-l++,o.push(null))}for(var p=u>=i.length?e.length:i[u],v=0;v<e.length;v++){var m=e[v];m.key?s.hasOwnProperty(m.key)||o.push(m):v>=p&&o.push(m)}for(var b,_=o.slice(),k=0,w=[],x=[],S=0;S<e.length;){var E=e[S];for(b=_[k];null===b&&_.length;)w.push(y(_,k,null)),b=_[k];b&&b.key===E.key?(k++,S++):E.key?(b&&b.key&&n[b.key]!==S+1?(w.push(y(_,k,b.key)),(b=_[k])&&b.key===E.key?k++:x.push({key:E.key,to:S})):x.push({key:E.key,to:S}),S++):b&&b.key&&w.push(y(_,k,b.key))}for(;k<_.length;)b=_[k],w.push(y(_,k,b&&b.key));return w.length!==l||x.length?{children:o,moves:{removes:w,inserts:x}}:{children:o,moves:null}}(o,e.children),c=u.children,l=o.length,h=c.length,d=l>h?l:h,p=0;p<d;p++){var v=o[p],m=c[p];s+=1,v?f(v,m,r,s):m&&(n=b(n,new i(i.INSERT,null,m))),a(v)&&v.count&&(s+=v.count)}return u.moves&&(n=b(n,new i(i.ORDER,t,u.moves))),n}(t,e,r,c,n)}else c=b(c,new i(i.VNODE,t,e)),h=!0;else c=b(c,new i(i.VNODE,t,e)),h=!0;else s(e)?s(t)?t.text!==e.text&&(c=b(c,new i(i.VTEXT,t,e))):(c=b(c,new i(i.VTEXT,t,e)),h=!0):o(e)&&(o(t)||(h=!0),c=b(c,new i(i.WIDGET,t,e)));c&&(r[n]=c),h&&d(t,r,n)}}function d(t,e,r){m(t,e,r),p(t,e,r)}function p(t,e,r){if(o(t))"function"==typeof t.destroy&&(e[r]=b(e[r],new i(i.REMOVE,t,null)));else if(a(t)&&(t.hasWidgets||t.hasThunks))for(var n=t.children,s=n.length,c=0;c<s;c++){var l=n[c];p(l,e,r+=1),a(l)&&l.count&&(r+=l.count)}else u(t)&&v(t,null,e,r)}function v(t,e,r,n){var a=c(t,e),s=h(a.a,a.b);(function(t){for(var e in t)if("a"!==e)return!0;return!1})(s)&&(r[n]=new i(i.THUNK,null,s))}function m(t,e,r){if(a(t)){if(t.hooks&&(e[r]=b(e[r],new i(i.PROPS,t,function(t){var e={};for(var r in t)e[r]=void 0;return e}(t.hooks)))),t.descendantHooks||t.hasThunks)for(var n=t.children,s=n.length,o=0;o<s;o++){var c=n[o];m(c,e,r+=1),a(c)&&c.count&&(r+=c.count)}}else u(t)&&v(t,null,e,r)}function y(t,e,r){return t.splice(e,1),{from:e,key:r}}function g(t){for(var e={},r=[],n=t.length,i=0;i<n;i++){var a=t[i];a.key?e[a.key]=i:r.push(i)}return{keys:e,free:r}}function b(t,e){return t?(n(t)?t.push(e):t=[t,e],t):e}t.exports=h},6385:t=>{"use strict";function e(t){for(var e,r=1/0,n=-1/0,i=0,a=t.length;i<a;i++)r>(e=t[i])&&(r=e),n<e&&(n=e);return{min:r,max:n}}function r(t,e){var r=Math.pow(2,e-1),n=t<0?t*r:t*(r-1);return Math.max(-r,Math.min(r-1,n))}function n(t,n,a){var s,o,u,c,l,h,f=t.length,d=Math.ceil(f/n),p=i(a,2*d);for(s=0;s<d;s++)o=s*n,u=(s+1)*n>f?f:(s+1)*n,l=r((h=e(t.subarray(o,u))).min,a),c=r(h.max,a),p[2*s]=l,p[2*s+1]=c;return p}function i(t,e){return new(new Function(`return Int${t}Array`)())(e)}function a(t,e){return"number"==typeof t?t:e}t.exports=function(t,e,r,s,o,u){if(e=a(e,1e3),u=a(u,16),null==r&&(r=!0),[8,16,32].indexOf(u)<0)throw new Error("Invalid number of bits specified for peaks.");var c,l,h=t.numberOfChannels,f=[];if(s=a(s,0),o=a(o,t.length),void 0===t.subarray)for(c=0;c<h;c++)l=t.getChannelData(c).subarray(s,o),f.push(n(l,e,u));else f.push(n(t.subarray(s,o),e,u));return r&&f.length>1&&(f=function(t,e){var r,n,a=t.length,s=1/a,o=t[0].length/2,u=0,c=0,l=i(e,2*o);for(c=0;c<o;c++){for(r=0,n=0,u=0;u<a;u++)r+=s*t[u][2*c],n+=s*t[u][2*c+1];l[2*c]=r,l[2*c+1]=n}return[l]}(f,u)),{length:f[0].length/2,data:f,bits:u}}},8722:t=>{var e=Array.isArray,r=Object.prototype.toString;t.exports=e||function(t){return"[object Array]"===r.call(t)}},444:()=>{},1337:(t,e,r)=>{var n=r(7501).default;function i(){"use strict";t.exports=i=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},a=Object.prototype,s=a.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),s=new z(n||[]);return o(a,"_invoke",{value:T(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=d;var v="suspendedStart",m="suspendedYield",y="executing",g="completed",b={};function _(){}function k(){}function w(){}var x={};f(x,c,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==a&&s.call(E,c)&&(x=E);var O=w.prototype=_.prototype=Object.create(x);function P(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(i,a,o,u){var c=p(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==n(h)&&s.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,u)}),(function(t){r("throw",t,o,u)})):e.resolve(h).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(a,a):a()}})}function T(t,r,n){var i=v;return function(a,s){if(i===y)throw new Error("Generator is already running");if(i===g){if("throw"===a)throw s;return{value:e,done:!0}}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var u=A(o,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=y;var c=p(t,r,n);if("normal"===c.type){if(i=n.done?g:m,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=g,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=p(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var s=a.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(s.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(n(t)+" is not iterable")}return k.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:k,configurable:!0}),k.displayName=f(w,h,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,h,"GeneratorFunction")),t.prototype=Object.create(O),t},r.awrap=function(t){return{__await:t}},P(C.prototype),f(C.prototype,l,(function(){return this})),r.AsyncIterator=C,r.async=function(t,e,n,i,a){void 0===a&&(a=Promise);var s=new C(d(t,e,n,i),a);return r.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(O),f(O,h,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=I,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&s.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,i){return o.type="throw",o.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=s.call(a,"catchLoc"),c=s.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},r}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},7501:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},824:(t,e,r)=>{var n=r(1337)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>Ct,init:()=>Pt});var t=r(6146),e=r.n(t),i=r(1583),a=r.n(i),s=r(8709),o=r.n(s);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e,r,n,i,a,s){try{var o=t[a](s),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){c(a,n,i,s,o,"next",t)}function o(t){c(a,n,i,s,o,"throw",t)}s(void 0)}))}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),"symbol"===u(a)?a:String(a)),n)}var i,a}function d(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=r(824),v=r.n(p),m=r(542),y=r.n(m),g=r(3132),b=r.n(g),_=r(44),k=r.n(_),w=r(1072),x=r.n(w),S=r(2858),E=r.n(S);function O(t,e){return Math.ceil(t*e)}function P(t,e,r){return t*e/r}function C(t,e,r){return Math.ceil(t*r/e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},A.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function R(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function z(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var I=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o()();h(this,t),this.src=e,this.ac=r,this.audioRequestState=0,this.ee=n}return d(t,[{key:"setStateChange",value:function(t){this.audioRequestState=t,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}},{key:"fileProgress",value:function(t){var e=0;0===this.audioRequestState&&this.setStateChange(1),t.lengthComputable&&(e=t.loaded/t.total*100),this.ee.emit("loadprogress",e,this.src)}},{key:"fileLoad",value:function(t){var e=this,r=t.target.response||t.target.result;return this.setStateChange(2),new Promise((function(t,n){e.ac.decodeAudioData(r,(function(r){e.audioBuffer=r,e.setStateChange(3),t(r)}),(function(t){n(null===t?Error("MediaDecodeAudioDataUnknownContentType"):t)}))}))}}]),t}();var L=function(t){R(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=T(e);if(r){var i=T(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return z(this,t)});function i(){return h(this,i),n.apply(this,arguments)}return d(i,[{key:"load",value:function(){var t=this;return new Promise((function(e,r){if(t.src.type.match(/audio.*/)||t.src.type.match(/video\/ogg/)||t.src.type.match(/video\/webm/)){var n=new FileReader;n.readAsArrayBuffer(t.src),n.addEventListener("progress",(function(e){A(T(i.prototype),"fileProgress",t).call(t,e)})),n.addEventListener("load",(function(n){A(T(i.prototype),"fileLoad",t).call(t,n).then((function(t){e(t)})).catch(r)})),n.addEventListener("error",r)}else r(Error("Unsupported file type ".concat(t.src.type)))}))}}]),i}(I);var F=function(t){R(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=T(e);if(r){var i=T(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return z(this,t)});function i(){return h(this,i),n.apply(this,arguments)}return d(i,[{key:"load",value:function(){return Promise.resolve(this.src)}}]),i}(I);var D=function(t){R(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=T(e);if(r){var i=T(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return z(this,t)});function i(){return h(this,i),n.apply(this,arguments)}return d(i,[{key:"load",value:function(){var t=this;return new Promise((function(e,r){var n=new XMLHttpRequest;n.open("GET",t.src,!0),n.responseType="arraybuffer",n.send(),n.addEventListener("progress",(function(e){A(T(i.prototype),"fileProgress",t).call(t,e)})),n.addEventListener("load",(function(n){A(T(i.prototype),"fileLoad",t).call(t,n).then((function(t){e(t)})).catch(r)})),n.addEventListener("error",(function(){r(Error("Track ".concat(t.src," failed to load")))}))}))}}]),i}(I),B=function(){function t(){h(this,t)}return d(t,null,[{key:"createLoader",value:function(t,e,r){if(t instanceof Blob)return new L(t,e,r);if(t instanceof AudioBuffer)return new F(t,e,r);if("string"==typeof t)return new D(t,e,r);throw new Error("Unsupported src type")}}]),t}(),N=function(){function t(e){h(this,t),this.playlist=e}return d(t,[{key:"hook",value:function(t){var e=this.playlist;if(!e.isScrolling){var r=t;if(e.isAutomaticScroll){var n=t.getBoundingClientRect(),i=e.controls.show?e.controls.width:0,a=P(n.width-i,e.samplesPerPixel,e.sampleRate),s=e.isPlaying()?e.playbackSeconds:e.getTimeSelection().start;(s<e.scrollLeft||s>=e.scrollLeft+a)&&(e.scrollLeft=Math.min(s,e.duration-a))}var o=C(e.scrollLeft,e.samplesPerPixel,e.sampleRate);r.scrollLeft=o}}}]),t}(),U=function(){function t(e,r,n,i,a){h(this,t),this.tickInfo=e,this.offset=r,this.samplesPerPixel=n,this.duration=i,this.colors=a}return d(t,[{key:"hook",value:function(t,e,r){var n=this;if(void 0===r||r.offset!==this.offset||r.duration!==this.duration||r.samplesPerPixel!==this.samplesPerPixel){var i=t.width,a=t.height,s=t.getContext("2d");s.clearRect(0,0,i,a),s.fillStyle=this.colors.timeColor,Object.keys(this.tickInfo).forEach((function(t){var e=n.tickInfo[t],r=a-e;s.fillRect(t,r,1,e)}))}}}]),t}();const M=function(){function t(e,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5?arguments[5]:void 0;h(this,t),this.duration=e,this.offset=r,this.samplesPerPixel=n,this.sampleRate=i,this.marginLeft=a,this.colors=s,this.timeinfo={2e4:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12e3:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},1e4:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5e3:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}return d(t,[{key:"getScaleInfo",value:function(t){var e=Object.keys(this.timeinfo).map((function(t){return parseInt(t,10)}));e=e.sort((function(t,e){return t-e}));for(var r=0;r<e.length;r+=1)if(t<=e[r])return this.timeinfo[e[r]];return this.timeinfo[e[0]]}},{key:"render",value:function(){for(var e=C(this.duration,this.samplesPerPixel,this.sampleRate),r=this.sampleRate/this.samplesPerPixel,n=C(this.offset,this.samplesPerPixel,this.sampleRate),i=this.getScaleInfo(this.samplesPerPixel),a={},s=[],o=e+n,u=0,c=0;c<o;c+=r*i.secondStep){var l=Math.floor(c),h=l-n;l>=n&&(i.marker&&u%i.marker==0?(s.push(y()("div.time",{attributes:{style:"position: absolute; left: ".concat(h,"px;")}},[t.formatTime(u)])),a[h]=10):i.bigStep&&u%i.bigStep==0?a[h]=5:i.smallStep&&u%i.smallStep==0&&(a[h]=2)),u+=1e3*i.secondStep}return y()("div.playlist-time-scale",{attributes:{style:"position: relative; left: 0; right: 0; margin-left: ".concat(this.marginLeft,"px;")}},[s,y()("canvas",{attributes:{width:e,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new U(a,this.offset,this.samplesPerPixel,this.duration,this.colors)})])}}],[{key:"formatTime",value:function(t){var e=t/1e3,r=e%60,n=(e-r)/60;return r<10&&(r="0".concat(r)),"".concat(n,":").concat(r)}}]),t}();var G=r(2473),W=r.n(G),Z=r(9052),V=r.n(Z);const H={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let q;const X=new Uint8Array(16);function Y(){if(!q&&(q="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return q(X)}const J=[];for(let t=0;t<256;++t)J.push((t+256).toString(16).slice(1));const K=function(t,e,r){if(H.randomUUID&&!e&&!t)return H.randomUUID();const n=(t=t||{}).random||(t.rng||Y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=n[t];return e}return function(t,e=0){return J[t[e+0]]+J[t[e+1]]+J[t[e+2]]+J[t[e+3]]+"-"+J[t[e+4]]+J[t[e+5]]+"-"+J[t[e+6]]+J[t[e+7]]+"-"+J[t[e+8]]+J[t[e+9]]+"-"+J[t[e+10]]+J[t[e+11]]+J[t[e+12]]+J[t[e+13]]+J[t[e+14]]+J[t[e+15]]}(n)};var $=r(6385),Q=r.n($),tt=r(9304),et=function(){function t(e){h(this,t),this.track=e}return d(t,[{key:"setup",value:function(t,e){this.samplesPerPixel=t,this.sampleRate=e}},{key:"click",value:function(t){t.preventDefault();var e=P(t.offsetX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}}],[{key:"getClass",value:function(){return".state-cursor"}},{key:"getEvents",value:function(){return["click"]}}]),t}();function rt(t){try{var e=t.target.getBoundingClientRect();return t.targetTouches[0].clientX-e.x}catch(t){return NaN}}var nt=function(){function t(e){h(this,t),this.track=e,this.active=!1}return d(t,[{key:"setup",value:function(t,e){this.samplesPerPixel=t,this.sampleRate=e}},{key:"emitSelection",value:function(t){var e=Math.min(t,this.startX),r=Math.max(t,this.startX),n=P(e,this.samplesPerPixel,this.sampleRate),i=P(r,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",n,i,this.track)}},{key:"complete",value:function(t){this.emitSelection(t),this.active=!1}},{key:"mousedown",value:function(t){t.preventDefault(),this.active=!0,this.startX=t.offsetX;var e=P(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",e,e,this.track)}},{key:"touchstart",value:function(t){t.preventDefault();var e=rt(t);if(e){this.active=!0,this.startX=e;var r=P(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",r,r,this.track)}}},{key:"mousemove",value:function(t){this.active&&(t.preventDefault(),this.emitSelection(t.offsetX))}},{key:"touchmove",value:function(t){if(this.active){t.preventDefault();var e=rt(t);e&&this.emitSelection(e)}}},{key:"mouseup",value:function(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}},{key:"mouseleave",value:function(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}},{key:"touchend",value:function(t){if(this.active){t.preventDefault();var e=rt(t);e&&this.complete(e)}}}],[{key:"getClass",value:function(){return".state-select"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"]}}]),t}(),it=function(){function t(e){h(this,t),this.track=e,this.active=!1}return d(t,[{key:"setup",value:function(t,e){this.samplesPerPixel=t,this.sampleRate=e}},{key:"emitShift",value:function(t){var e=P(t-this.prevX,this.samplesPerPixel,this.sampleRate);this.prevX=t,this.track.ee.emit("shift",e,this.track)}},{key:"complete",value:function(t){this.emitShift(t),this.active=!1}},{key:"mousedown",value:function(t){t.preventDefault(),this.active=!0,this.el=t.target,this.prevX=t.offsetX}},{key:"touchstart",value:function(t){t.preventDefault();var e=rt(t);e&&(this.active=!0,this.el=t.target,this.prevX=e)}},{key:"mousemove",value:function(t){this.active&&(t.preventDefault(),this.emitShift(t.offsetX))}},{key:"touchmove",value:function(t){if(this.active){t.preventDefault();var e=rt(t);e&&this.emitShift(e)}}},{key:"mouseup",value:function(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}},{key:"mouseleave",value:function(t){this.active&&(t.preventDefault(),this.complete(t.offsetX))}},{key:"touchend",value:function(t){if(this.active){t.preventDefault();var e=rt(t);e&&this.complete(e)}}}],[{key:"getClass",value:function(){return".state-shift"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"]}}]),t}(),at=function(){function t(e){h(this,t),this.track=e}return d(t,[{key:"setup",value:function(t,e){this.samplesPerPixel=t,this.sampleRate=e}},{key:"click",value:function(t){var e=P(t.offsetX,this.samplesPerPixel,this.sampleRate);e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadein",e-this.track.getStartTime(),this.track)}}],[{key:"getClass",value:function(){return".state-fadein"}},{key:"getEvents",value:function(){return["click"]}}]),t}(),st=function(){function t(e){h(this,t),this.track=e}return d(t,[{key:"setup",value:function(t,e){this.samplesPerPixel=t,this.sampleRate=e}},{key:"click",value:function(t){var e=P(t.offsetX,this.samplesPerPixel,this.sampleRate);e>this.track.getStartTime()&&e<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-e,this.track)}}],[{key:"getClass",value:function(){return".state-fadeout"}},{key:"getEvents",value:function(){return["click"]}}]),t}();const ot={cursor:et,select:nt,shift:it,fadein:at,fadeout:st},ut=function(){function t(e,r,n,i,a,s,o,u){h(this,t),this.peaks=e,this.offset=r,this.color=i,this.bits=n,this.scale=a,this.height=s,this.barWidth=o,this.barGap=u}return d(t,[{key:"hook",value:function(e,r,n){if(void 0===n||n.peaks!==this.peaks||n.scale!==this.scale||n.height!==this.height){var i=this.scale,a=e.width/i,s=e.getContext("2d"),o=e.height/i/2,u=Math.pow(2,this.bits-1),c=this.barWidth,l=this.barGap,h=c+l;s.clearRect(0,0,e.width,e.height),s.save(),s.fillStyle=this.color,s.scale(i,i);for(var f=0;f<a;f+=h){var d=this.peaks[2*(f+this.offset)]/u,p=this.peaks[2*(f+this.offset)+1]/u;t.drawFrame(s,o,f,d,p,c,l)}s.restore()}}}],[{key:"drawFrame",value:function(t,e,r,n,i,a,s){var o=Math.abs(n*e),u=Math.abs(i*e);t.fillRect(r,0,a,e-u),t.fillRect(r,e+o,a,e-o),0!==s&&t.fillRect(r+a,0,s,2*e)}}]),t}();var ct=r(4571);const lt=function(){function t(e,r,n,i){h(this,t),this.type=e,this.shape=r,this.duration=n,this.samplesPerPixel=i}return d(t,[{key:"hook",value:function(e,r,n){if(void 0===n||n.shape!==this.shape||n.type!==this.type||n.duration!==this.duration||n.samplesPerPixel!==this.samplesPerPixel){var i=e.getContext("2d"),a=e.width,s=e.height,o=t.createCurve(this.shape,this.type,a),u=o.length,c=s-o[0]*s;i.clearRect(0,0,e.width,e.height),i.save(),i.strokeStyle="black",i.beginPath(),i.moveTo(0,c);for(var l=1;l<u;l+=1)c=s-o[l]*s,i.lineTo(l,c);i.stroke(),i.restore()}}}],[{key:"createCurve",value:function(t,e,r){var n,i;switch(e){case tt.Y1:n=1;break;case tt.h7:n=-1;break;default:throw new Error("Unsupported fade type.")}switch(t){case tt._h:i=(0,ct.sCurve)(r,n);break;case tt.t$:i=(0,ct.linear)(r,n);break;case tt.Jl:i=(0,ct.exponential)(r,n);break;case tt.Hp:i=(0,ct.logarithmic)(r,10,n);break;default:throw new Error("Unsupported fade shape")}return i}}]),t}();var ht=function(){function t(e){h(this,t),this.gain=e}return d(t,[{key:"hook",value:function(t){t.value=100*this.gain,t.title="".concat(Math.round(100*this.gain),"% volume")}}]),t}(),ft=function(){function t(e){h(this,t),this.stereoPan=e}return d(t,[{key:"hook",value:function(t){var e;t.value=100*this.stereoPan,e=0===this.stereoPan?"Center":this.stereoPan<0?"Left":"Right";var r="".concat(Math.abs(Math.round(100*this.stereoPan)),"% ");t.title="Pan: ".concat(0!==this.stereoPan?r:"").concat(e)}}]),t}(),dt=function(){function t(){h(this,t),this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0,this.stereoPan=0,this.hertzjsTrack=void 0}return d(t,[{key:"setHertzjsTrack",value:function(t){this.hertzjsTrack=t}},{key:"setEventEmitter",value:function(t){this.ee=t}},{key:"setName",value:function(t){this.name=t}},{key:"setCustomClass",value:function(t){this.customClass=t}},{key:"setWaveOutlineColor",value:function(t){this.waveOutlineColor=t}},{key:"setCues",value:function(t,e){if(e<t)throw new Error("cue out cannot be less than cue in");this.cueIn=t,this.cueOut=e,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}},{key:"trim",value:function(t,e){var r=this.getStartTime(),n=this.getEndTime(),i=this.cueIn-r;if(r<=t&&n>=t||r<=e&&n>=e){var a=t<r?r:t,s=e>n?n:e;this.setCues(a+i,s+i),t>r&&this.setStartTime(t)}}},{key:"createArrayBuffer",value:function(t,e,r){var n,i=this.getStartTime(),a=this.getEndTime(),s=t,o=e,u=s-this.getStartTime();u<0&&(u=0);var c=u/this.duration,l=o-this.getStartTime(),h=(this.duration-l)/this.duration;if(h<0&&(h=0),s<=a&&o>=i){var f=this.buffer.numberOfChannels,d=c*this.buffer.length,p=h*this.buffer.length;try{n=r.createBuffer(f,d+p,this.buffer.sampleRate);for(var v=new Float32Array(d),m=new Float32Array(p),y=0;y<f;y++)this.buffer.copyFromChannel(v,y,0),this.buffer.copyFromChannel(m,y,this.buffer.length-p),n.copyToChannel(v,y,0),n.copyToChannel(m,y,d)}catch(t){throw t}}return n}},{key:"razorCut",value:function(t,e,r){var n={Track:r,Point:t,buffer1:this.createArrayBuffer(t,r.endTime,e),buffer2:this.createArrayBuffer(r.startTime,t,e)};return this.ee.emit("razorCutFinished",n)}},{key:"removePart",value:function(t,e,r,n){this.ee.emit("saveCutManipulation",this.buffer,n);var i,a,s=this.getStartTime(),o=this.getEndTime();t<=e?(i=t,a=e):(i=e,a=t),i<=s&&(i=s),a>=o&&(a=o);var u=this.cueIn,c=this.cueOut-(a-i),l=2*this.buffer.length/(this.buffer.sampleRate*this.buffer.numberOfChannels),h=i-this.getStartTime()+this.cueIn;console.log("timeSplitOffset: "+h),h<0&&(h=0);var f=h/l,d=(l-(a-this.getStartTime()+this.cueIn))/l;if(d<0&&(d=0),i<=o&&a>=s){var p,v=this.buffer.numberOfChannels,m=f*this.buffer.length,y=d*this.buffer.length;try{p=r.createBuffer(v,m+y,this.buffer.sampleRate);for(var g=new Float32Array(m),b=new Float32Array(y),_=0;_<v;_++)this.buffer.copyFromChannel(g,_,0),this.buffer.copyFromChannel(b,_,this.buffer.length-y),p.copyToChannel(g,_,0),p.copyToChannel(b,_,m)}catch(t){throw t}var k=n.fades;if(void 0!==k&&Object.keys(k).length>0){var w=0,x=0;Object.keys(k).forEach((function(t){"FadeIn"===k[t].type?w=k[t].end-k[t].start:"FadeOut"===k[t].type&&(x=k[t].end-k[t].start)})),w+x>=p.duration&&(this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0))}this.buffer=p,this.setCues(u,c),this.playout.buffer=this.buffer}}},{key:"setStartTime",value:function(t){this.startTime=t,this.endTime=t+this.duration}},{key:"setPlayout",value:function(t){this.playout=t}},{key:"setOfflinePlayout",value:function(t){this.offlinePlayout=t}},{key:"setEnabledStates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabledStates=W()({},{cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0},t)}},{key:"setFadeIn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(t>this.duration)throw new Error("Invalid Fade In");var r={shape:e,start:0,end:t};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(tt.Y1,r.shape,r.start,r.end)}},{key:"setFadeOut",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(t>this.duration)throw new Error("Invalid Fade Out");var r={shape:e,start:this.duration-t,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(tt.h7,r.shape,r.start,r.end)}},{key:"saveFade",value:function(t,e,r,n){var i=K();return this.fades[i]={type:t,shape:e,start:r,end:n},i}},{key:"removeFade",value:function(t){delete this.fades[t]}},{key:"setBuffer",value:function(t){this.buffer=t}},{key:"setPeakData",value:function(t){this.peakData=t}},{key:"calculatePeaks",value:function(t,e){var r=O(this.cueIn,e),n=O(this.cueOut,e);this.setPeaks(Q()(this.buffer,t,this.peakData.mono,r,n))}},{key:"setPeaks",value:function(t){this.peaks=t}},{key:"setState",value:function(t){if(this.state=t,this.state&&this.enabledStates[this.state]){var e=ot[this.state];this.stateObj=new e(this)}else this.stateObj=void 0}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getDuration",value:function(){return this.duration}},{key:"isPlaying",value:function(){return this.playout.isPlaying()}},{key:"setShouldPlay",value:function(t){this.playout.setShouldPlay(t)}},{key:"setGainLevel",value:function(t){this.gain=t,this.playout.setVolumeGainLevel(t)}},{key:"setMasterGainLevel",value:function(t){this.playout.setMasterGainLevel(t)}},{key:"setStereoPanValue",value:function(t){this.stereoPan=t,this.playout.setStereoPanValue(t)}},{key:"setEffects",value:function(t){this.effectsGraph=t,this.playout.setEffects(t)}},{key:"schedulePlay",value:function(t,e,r,n){var i,a,s=t,o=r?r-e:void 0,u=W()({},{shouldPlay:!0,masterGain:1,isOffline:!1},n),c=u.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=e||o&&e+o<this.startTime)return Promise.resolve();this.startTime>=e?(i=0,s+=this.startTime-e,r?(o-=this.startTime-e,a=Math.min(o,this.duration)):a=this.duration):(i=e-this.startTime,a=r?Math.min(o,this.duration-i):this.duration-i),i+=this.cueIn;var l=e-this.startTime,h=c.setUpSource();return V()(this.fades,(function(e){var r,n;if(l<e.end)switch(l<=e.start?(r=t+(e.start-l),n=e.end-e.start):l>e.start&&l<e.end&&(r=t-(l-e.start),n=e.end-e.start),e.type){case tt.Y1:c.applyFadeIn(r,n,e.shape);break;case tt.h7:c.applyFadeOut(r,n,e.shape);break;default:throw new Error("Invalid fade type saved on track.")}})),c.setVolumeGainLevel(this.gain),c.setShouldPlay(u.shouldPlay),c.setMasterGainLevel(u.masterGain),c.setStereoPanValue(this.stereoPan),c.play(s,i,a),h}},{key:"scheduleStop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.playout.stop(t)}},{key:"renderOverlay",value:function(t){var e=this,r=C(t.playlistLength,t.resolution,t.sampleRate),n={attributes:{style:"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: ".concat(r,"px; z-index: 9;")}},i="";if(this.stateObj){this.stateObj.setup(t.resolution,t.sampleRate);var a=ot[this.state];a.getEvents().forEach((function(t){n["on".concat(t)]=e.stateObj[t].bind(e.stateObj)})),i=a.getClass()}return y()("div.playlist-overlay".concat(i),n)}},{key:"renderControls",value:function(t){var e=this,r=t.muted?".active":"",n=t.soloed?".active":"",i=t.collapsed,a=this.peaks.data.length,s=t.controls.widgets,o=y()("button.btn.btn-danger.btn-xs.track-remove",{attributes:{type:"button",title:"Remove track"},onclick:function(){e.ee.emit("removeTrack",e)}},[y()("i.fas.fa-times")]),u=y()("button.btn.btn-info.btn-xs.track-collapse",{attributes:{type:"button",title:i?"Expand track":"Collapse track"},onclick:function(){e.ee.emit("changeTrackView",e,{collapsed:!i})}},[y()("i.fas.".concat(i?"fa-caret-down":"fa-caret-up"))]),c=[];s.remove&&c.push(o),s.collapse&&c.push(u);var l=[y()("div.track-header.track-header-lean",c)],h=[],f=[],d=[];i||(s.muteOrSolo&&h.push(y()("div.btn-group-lean",[y()("button.btn.btn-outline-dark.btn-xs.btn-mute".concat(r),{attributes:{type:"button"},onclick:function(){e.ee.emit("mute",e)}},["M"]),y()("button.btn.btn-outline-dark.btn-xs.btn-solo".concat(n),{onclick:function(){e.ee.emit("solo",e)}},["S"])])),s.volume&&f.push(y()("label.volume-lean",[y()("div.volume-controls",[y()("i.fas.fa-volume-up")]),y()("input.volume-slider",{attributes:{"aria-label":"Track volume control",type:"range",min:0,max:100,value:100},hook:new ht(this.gain),oninput:function(t){e.ee.emit("volumechange",t.target.value,e)}})])),s.stereoPan&&d.push(y()("label.stereopan-lean",[y()("div.stereopan-controls",[y()("span",{},["L"]),y()("span",{},["R"])]),y()("input.stereopan-slider",{attributes:{"aria-label":"Track stereo pan control",type:"range",min:-100,max:100,value:100},hook:new ft(this.stereoPan),oninput:function(t){e.ee.emit("stereopan",t.target.value/100,e)}})])));var p=[h,f,d,l];return y()("div.controls",{attributes:{style:"height: ".concat(a*t.height,"px; width: ").concat(t.controls.width,"px; position: absolute; left: 0; z-index: 10;")}},p)}},{key:"render",value:function(t){var e=this,r=this.peaks.length,n=C(t.playbackSeconds,t.resolution,t.sampleRate),i=C(this.startTime,t.resolution,t.sampleRate),a=C(this.endTime,t.resolution,t.sampleRate),s=0,o=this.peaks.data.length,u=Math.ceil(window.devicePixelRatio);n>0&&n>i&&(s=n<a?n-i:r);var c=[y()("div.cursor",{attributes:{style:"position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: ".concat(n,"px; bottom: 0; z-index: 5;")}})],l=Object.keys(this.peaks.data).map((function(n){for(var a=[y()("div.channel-progress",{attributes:{style:"position: absolute; width: ".concat(s,"px; height: ").concat(t.height,"px; z-index: 2;")}})],o=0,c=r,l=e.peaks.data[n];c>0;){var h=Math.min(c,1e3),f=e.waveOutlineColor?e.waveOutlineColor:t.colors.waveOutlineColor;a.push(y()("canvas",{attributes:{width:h*u,height:t.height*u,style:"float: left; position: relative; margin: 0; padding: 0; z-index: 3; width: ".concat(h,"px; height: ").concat(t.height,"px;")},hook:new ut(l,o,e.peaks.bits,f,u,t.height,t.barWidth,t.barGap)})),c-=h,o+=1e3}if(e.fadeIn){var d=e.fades[e.fadeIn],p=C(d.end-d.start,t.resolution,t.sampleRate);a.push(y()("div.wp-fade.wp-fadein",{attributes:{style:"position: absolute; height: ".concat(t.height,"px; width: ").concat(p,"px; top: 0; left: 0; z-index: 4;")}},[y()("canvas",{attributes:{width:p,height:t.height},hook:new lt(d.type,d.shape,d.end-d.start,t.resolution)})]))}if(e.fadeOut){var v=e.fades[e.fadeOut],m=C(v.end-v.start,t.resolution,t.sampleRate);a.push(y()("div.wp-fade.wp-fadeout",{attributes:{style:"position: absolute; height: ".concat(t.height,"px; width: ").concat(m,"px; top: 0; right: 0; z-index: 4;")}},[y()("canvas",{attributes:{width:m,height:t.height},hook:new lt(v.type,v.shape,v.end-v.start,t.resolution)})]))}return y()("div.channel.channel-".concat(n),{attributes:{style:"height: ".concat(t.height,"px; width: ").concat(r,"px; top: ").concat(n*t.height,"px; left: ").concat(i,"px; position: absolute; margin: 0; padding: 0; z-index: 1;")}},a)}));if(c.push(l),c.push(this.renderOverlay(t)),!0===t.isActive){var h=C(t.timeSelection.start,t.resolution,t.sampleRate),f=C(t.timeSelection.end,t.resolution,t.sampleRate)-h+1,d=f>1?".segment":".point";c.push(y()("div.selection".concat(d),{attributes:{style:"position: absolute; width: ".concat(f,"px; bottom: 0; top: 0; left: ").concat(h,"px; z-index: 4;")}}))}var p=y()("div.waveform",{attributes:{style:"height: ".concat(o*t.height,"px; position: relative;")}},c),v=[],m=0;t.controls.show&&(v.push(this.renderControls(t)),m=t.controls.width),v.push(p);var g=t.shouldPlay?"":".silent",b=void 0===this.customClass?"":".".concat(this.customClass);return y()("div.channel-wrapper".concat(g).concat(b),{attributes:{style:"margin-left: ".concat(m,"px; height: ").concat(t.height*o,"px;")}},v)}},{key:"getTrackDetails",value:function(){var t={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut,stereoPan:this.stereoPan,gain:this.gain,effects:this.effectsGraph};if(this.fadeIn){var e=this.fades[this.fadeIn];t.fadeIn={shape:e.shape,duration:e.end-e.start}}if(this.fadeOut){var r=this.fades[this.fadeOut];t.fadeOut={shape:r.shape,duration:r.end-r.start}}return t}}]),t}();function pt(t,e){t.connect(e)}var vt=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.createGain();h(this,t),this.ac=e,this.gain=1,this.effectsGraph=pt,this.masterEffectsGraph=pt,this.buffer=r,this.masterGain=n,this.destination=this.ac.destination}return d(t,[{key:"applyFade",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"logarithmic";if(t===tt.Y1)(0,tt.L7)(this.fadeGain.gain,n,e,r);else{if(t!==tt.h7)throw new Error("Unsupported fade type");(0,tt.Mt)(this.fadeGain.gain,n,e,r)}}},{key:"applyFadeIn",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(tt.Y1,t,e,r)}},{key:"applyFadeOut",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(tt.h7,t,e,r)}},{key:"isPlaying",value:function(){return void 0!==this.source}},{key:"getDuration",value:function(){return this.buffer.duration}},{key:"setAudioContext",value:function(t){this.ac=t,this.destination=this.ac.destination}},{key:"createStereoPanner",value:function(){return this.ac.createStereoPanner?this.ac.createStereoPanner():this.ac.createPanner()}},{key:"setUpSource",value:function(){var t,e,r=this;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;var n=new Promise((function(n){r.source.onended=function(){r.source.disconnect(),r.fadeGain.disconnect(),r.volumeGain.disconnect(),r.shouldPlayGain.disconnect(),r.panner.disconnect(),t&&t(),e&&e(),r.source=void 0,r.fadeGain=void 0,r.volumeGain=void 0,r.shouldPlayGain=void 0,r.panner=void 0,n()}}));return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.panner=this.createStereoPanner(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.panner),t=this.effectsGraph(this.panner,this.masterGain,this.ac instanceof(window.OfflineAudioContext||window.webkitOfflineAudioContext)),e=this.masterEffectsGraph(this.masterGain,this.destination,this.ac instanceof(window.OfflineAudioContext||window.webkitOfflineAudioContext)),n}},{key:"setVolumeGainLevel",value:function(t){this.volumeGain&&(this.volumeGain.gain.value=t)}},{key:"setShouldPlay",value:function(t){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=t?1:0)}},{key:"setMasterGainLevel",value:function(t){this.masterGain&&(this.masterGain.gain.value=t)}},{key:"setStereoPanValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.panner&&(void 0!==this.panner.pan?this.panner.pan.value=t:(this.panner.panningModel="equalpower",this.panner.setPosition(t,0,1-Math.abs(t))))}},{key:"setEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;this.effectsGraph=t}},{key:"setMasterEffects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt;this.masterEffectsGraph=t}},{key:"play",value:function(t,e,r){this.source.start(t,e,r)}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.source&&this.source.stop(t)}}]),t}(),mt=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,t),this.playlist=e,this.data=n,this.active=!1,this.ondragover=function(t){r.active&&(t.preventDefault(),r.emitDrag(t.clientX))}}return d(t,[{key:"emitDrag",value:function(t){var e=t-this.prevX;if(e){var r=P(e,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=t,this.playlist.ee.emit("dragged",r,this.data)}}},{key:"complete",value:function(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}},{key:"dragstart",value:function(t){var e=t;this.active=!0,this.prevX=t.clientX,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}},{key:"dragend",value:function(t){this.active&&(t.preventDefault(),this.complete())}}],[{key:"getClass",value:function(){return".shift"}},{key:"getEvents",value:function(){return["dragstart","dragend"]}}]),t}(),yt=function(){};yt.prototype.hook=function(t){var e=t.querySelector(".current");if(e){var r=t.getBoundingClientRect(),n=e.getBoundingClientRect().top-r.top;t.scrollTop+=n}};const gt=yt;const bt=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;h(this,t),this.playlist=e,this.marginLeft=o,this.resizeHandlers=[],this.editable=i,this.annotations=r.map((function(t){return{id:(e=t).id||K(),start:Number(e.begin)||0,end:Number(e.end)||0,lines:e.lines||[""],lang:e.language||"en"};var e})),this.setupInteractions(),this.controls=n,this.setupEE(e.ee),this.playlist.isContinuousPlay=s,this.playlist.linkEndpoints=a,this.length=this.annotations.length}return d(t,[{key:"setupInteractions",value:function(){var t=this;this.annotations.forEach((function(e,r){var n=new mt(t.playlist,{direction:"left",index:r}),i=new mt(t.playlist,{direction:"right",index:r});t.resizeHandlers.push(n),t.resizeHandlers.push(i)}))}},{key:"setupEE",value:function(t){var e=this;return t.on("dragged",(function(t,r){var n=r.index,i=e.annotations,a=i[n];if("left"===r.direction){var s=a.start;a.start+=t,a.start<0&&(a.start=0),n&&i[n-1].end>a.start&&(i[n-1].end=a.start),e.playlist.linkEndpoints&&n&&i[n-1].end===s&&(i[n-1].end=a.start)}else{var o=a.end;a.end+=t,a.end>e.playlist.duration&&(a.end=e.playlist.duration),n<i.length-1&&i[n+1].start<a.end&&(i[n+1].start=a.end),e.playlist.linkEndpoints&&n<i.length-1&&i[n+1].start===o&&(i[n+1].start=a.end)}e.playlist.drawRequest()})),t.on("continuousplay",(function(t){e.playlist.isContinuousPlay=t})),t.on("linkendpoints",(function(t){e.playlist.linkEndpoints=t})),t.on("annotationsrequest",(function(){e.export()})),t}},{key:"export",value:function(){var t=this.annotations.map((function(t){return e=t,{begin:String(e.start.toFixed(3)),end:String(e.end.toFixed(3)),id:String(e.id),language:e.lang,lines:e.lines};var e})),e="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t))),r=document.createElement("a");document.body.appendChild(r),r.href=e,r.download="annotations.json",r.click(),document.body.removeChild(r)}},{key:"renderResizeLeft",value:function(t){var e=mt.getEvents(),r={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},n=this.resizeHandlers[2*t];return e.forEach((function(t){r["on".concat(t)]=n[t].bind(n)})),y()("div.resize-handle.resize-w",r)}},{key:"renderResizeRight",value:function(t){var e=mt.getEvents(),r={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},n=this.resizeHandlers[2*t+1];return e.forEach((function(t){r["on".concat(t)]=n[t].bind(n)})),y()("div.resize-handle.resize-e",r)}},{key:"renderControls",value:function(t,e){var r=this,n=this;return this.controls.map((function(i){return y()("i.".concat(i.class),{attributes:{title:i.title},onclick:function(){i.action(t,e,n.annotations,{linkEndpoints:n.playlist.linkEndpoints}),r.setupInteractions(),n.playlist.drawRequest()}})}))}},{key:"render",value:function(){var t=this,e=y()("div.annotations-boxes",{attributes:{style:"height: 30px; position: relative; margin-left: ".concat(this.marginLeft,"px;")}},this.annotations.map((function(e,r){var n=t.playlist.samplesPerPixel,i=t.playlist.sampleRate,a=i/n,s=C(t.playlist.scrollLeft,n,i),o=Math.floor(e.start*a-s),u=Math.ceil(e.end*a-e.start*a);return y()("div.annotation-box",{attributes:{style:"position: absolute; height: 30px; width: ".concat(u,"px; left: ").concat(o,"px"),"data-id":e.id}},[t.renderResizeLeft(r),y()("span.id",{onclick:function(){var e=t.annotations[r].start,n=t.annotations[r].end;t.playlist.isContinuousPlay?(t.playlist.seek(e,e),t.playlist.ee.emit("play",e)):(t.playlist.seek(e,n),t.playlist.ee.emit("play",e,n))}},[e.id]),t.renderResizeRight(r)])}))),r=y()("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[e]),n=y()("div.annotations-text",{hook:new gt},this.annotations.map((function(e,r){var n=function(t){function e(t,e){var r=parseInt(t/3600,10)%24,n=parseInt(t/60,10)%60,i=(t%60).toFixed(e),a=r<10?"0".concat(r):r,s=n<10?"0".concat(n):n,o=i<10?"0".concat(i):i;return"".concat(a,":").concat(s,":").concat(o)}return{seconds:function(t){return t.toFixed(0)},thousandths:function(t){return t.toFixed(3)},"hh:mm:ss":function(t){return e(t,0)},"hh:mm:ss.u":function(t){return e(t,1)},"hh:mm:ss.uu":function(t){return e(t,2)},"hh:mm:ss.uuu":function(t){return e(t,3)}}[t]}(t.playlist.durationFormat),i=n(e.start),a=n(e.end),s="";t.playlist.isPlaying()&&t.playlist.playbackSeconds>=e.start&&t.playlist.playbackSeconds<=e.end&&(s=".current");var o={attributes:{contenteditable:!0},oninput:function(t){e.lines=[t.target.innerText]},onkeypress:function(t){13!==t.which&&13!==t.keyCode||(t.target.blur(),t.preventDefault())}},u=t.editable?o:{};return y()("div.annotation".concat(s),[y()("span.annotation-id",[e.id]),y()("span.annotation-start",[i]),y()("span.annotation-end",[a]),y()("span.annotation-lines",u,[e.lines]),y()("span.annotation-actions",t.renderControls(e,r))])})));return y()("div.annotations",[r,n])}}]),t}();function _t(){var t,e=0,r=[],n=[];function i(t,e,r){for(var n=0;n<r.length;n+=1)t.setUint8(e+n,r.charCodeAt(n))}function a(t,e){for(var r=new Float32Array(e),n=0,i=0;i<t.length;i+=1)r.set(t[i],n),n+=t[i].length;return r}function s(s){var o=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new ArrayBuffer(44+2*e.length),a=new DataView(n);return i(a,0,"RIFF"),a.setUint32(4,32+2*e.length,!0),i(a,8,"WAVE"),i(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,r?1:2,!0),a.setUint32(24,t,!0),a.setUint32(28,4*t,!0),a.setUint16(32,4,!0),a.setUint16(34,16,!0),i(a,36,"data"),a.setUint32(40,2*e.length,!0),function(t,e,r){for(var n=e,i=0;i<r.length;i+=1,n+=2){var a=Math.max(-1,Math.min(1,r[i]));t.setInt16(n,a<0?32768*a:32767*a,!0)}}(a,44,e),a}(function(t,e){for(var r=t.length+e.length,n=new Float32Array(r),i=0,a=0;i<r;)n[i+=1]=t[a],n[i+=1]=e[a],a+=1;return n}(a(r,e),a(n,e))),u=new Blob([o],{type:s});postMessage(u)}onmessage=function(i){if(i.data.command)switch(i.data.command){case"init":o=i.data.config,t=o.sampleRate;break;case"record":a=i.data.buffer,r.push(a[0]),n.push(a[1]),e+=a[0].length;break;case"exportWAV":s(i.data.type);break;case"clear":e=0,r=[],n=[];break;default:throw new Error("Unknown export worker command")}var a,o}}function kt(){function t(t){for(var e,r=1/0,n=-1/0,i=0;i<t.length;i+=1)r>(e=t[i])&&(r=e),n<e&&(n=e);return{min:r,max:n}}function e(t,e){var r=Math.pow(2,e-1),n=t<0?t*r:t*r-1;return Math.max(-r,Math.min(r-1,n))}onmessage=function(r){var n=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if([8,16,32].indexOf(i)<0)throw new Error("Invalid number of bits specified for peaks.");var a=[],s=r.length;return a.push(function(r,n,i){for(var a,s,o,u,c,l=r.length,h=Math.ceil(l/n),f=new(self["Int".concat(i,"Array")])(2*h),d=0;d<h;d+=1)a=d*n,s=(d+1)*n>l?l:(d+1)*n,u=e((c=t(r.subarray(a,s))).min,i),o=e(c.max,i),f[2*d]=u,f[2*d+1]=o;return f}(r.subarray(0,s),n,i)),{bits:i,length:a[0].length/2,data:a}}(r.data.samples,r.data.samplesPerPixel);postMessage(n)}}var wt=r(393),xt=r.n(wt),St=r(2562),Et=r.n(St),Ot=function(){function t(){h(this,t),this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.collapsedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0,this.hertzjsProject=void 0,this.hertjsMapper=new Map}var r,n;return d(t,[{key:"setHertzjsProject",value:function(t){this.hertzjsProject=t}},{key:"initExporter",value:function(){this.exportWorker=new(x())(_t)}},{key:"initRecorder",value:function(t){var e=this;this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstart=function(){var t=e.cursor,r=new dt;r.setName("Recording"),r.setEnabledStates(),r.setEventEmitter(e.ee),r.setStartTime(t),e.recordingTrack=r,e.tracks.push(r),e.chunks=[],e.working=!1},this.mediaRecorder.ondataavailable=function(t){if(e.chunks.push(t.data),!e.working){var r=new Blob(e.chunks,{type:"audio/ogg; codecs=opus"});B.createLoader(r,e.ac).load().then((function(t){e.recorderWorker.postMessage({samples:t.getChannelData(0),samplesPerPixel:e.samplesPerPixel}),e.recordingTrack.setCues(0,t.duration),e.recordingTrack.setBuffer(t),e.recordingTrack.setPlayout(new vt(e.ac,t,e.masterGainNode)),e.adjustDuration()})).catch((function(){e.working=!1})),e.working=!0}},this.mediaRecorder.onstop=function(){e.chunks=[],e.working=!1,e.cursor=e.duration+.3},this.recorderWorker=new(x())(kt),this.recorderWorker.onmessage=function(t){e.recordingTrack.setPeaks(t.data),e.working=!1,e.drawRequest()}}},{key:"setShowTimeScale",value:function(t){this.showTimescale=t}},{key:"setMono",value:function(t){this.mono=t}},{key:"setExclSolo",value:function(t){this.exclSolo=t}},{key:"setSeekStyle",value:function(t){this.seekStyle=t}},{key:"getSeekStyle",value:function(){return this.seekStyle}},{key:"setSampleRate",value:function(t){this.sampleRate=t}},{key:"setSamplesPerPixel",value:function(t){this.samplesPerPixel=t}},{key:"setAudioContext",value:function(t){this.ac=t,this.masterGainNode=t.createGain()}},{key:"getAudioContext",value:function(){return this.ac}},{key:"setControlOptions",value:function(t){this.controls=t}},{key:"setWaveHeight",value:function(t){this.waveHeight=t}},{key:"setCollapsedWaveHeight",value:function(t){this.collapsedWaveHeight=t}},{key:"setColors",value:function(t){this.colors=t}},{key:"setBarWidth",value:function(t){this.barWidth=t}},{key:"setBarGap",value:function(t){this.barGap=t}},{key:"setAnnotations",value:function(t){var e=this.controls.show?this.controls.width:0;this.annotationList=new bt(this,t.annotations,t.controls,t.editable,t.linkEndpoints,t.isContinuousPlay,e)}},{key:"setEffects",value:function(t){this.effectsGraph=t}},{key:"setEventEmitter",value:function(t){this.ee=t}},{key:"getEventEmitter",value:function(){return this.ee}},{key:"setUpEventEmitter",value:function(){var t=this,e=this.ee;e.on("automaticscroll",(function(e){t.isAutomaticScroll=e})),e.on("durationformat",(function(e){t.durationFormat=e,t.drawRequest()})),e.on("select",(function(e,r,n){t.isPlaying()?(t.lastSeeked=e,t.pausedAt=void 0,t.restartPlayFrom(e)):(t.seek(e,r,n),t.ee.emit("timeupdate",e),t.drawRequest())})),e.on("startaudiorendering",(function(e){t.startOfflineRender(e)})),e.on("statechange",(function(e){t.setState(e),t.drawRequest()})),e.on("shift",(function(e,r){r.setStartTime(r.getStartTime()+e),t.adjustDuration(),t.drawRequest()})),e.on("record",(function(){t.record()})),e.on("play",(function(e,r){t.play(e,r)})),e.on("pause",(function(){t.pause()})),e.on("stop",(function(){t.stop()})),e.on("rewind",(function(){t.rewind()})),e.on("fastforward",(function(){t.fastForward()})),e.on("clear",(function(){t.clear().then((function(){t.drawRequest()}))})),e.on("solo",(function(e){t.soloTrack(e),t.adjustTrackPlayout(),t.drawRequest()})),e.on("mute",(function(e){t.muteTrack(e),t.adjustTrackPlayout(),t.drawRequest()})),e.on("removeTrack",(function(e){t.removeTrack(e),t.adjustTrackPlayout(),t.drawRequest()})),e.on("changeTrackView",(function(e,r){t.collapseTrack(e,r),t.drawRequest()})),e.on("volumechange",(function(e,r){r.setGainLevel(e/100),t.drawRequest()})),e.on("mastervolumechange",(function(e){t.masterGain=e/100,t.tracks.forEach((function(e){e.setMasterGainLevel(t.masterGain)}))})),e.on("fadein",(function(e,r){r.setFadeIn(e,t.fadeType),t.drawRequest()})),e.on("fadeout",(function(e,r){r.setFadeOut(e,t.fadeType),t.drawRequest()})),e.on("stereopan",(function(e,r){r.setStereoPanValue(e),t.drawRequest()})),e.on("fadetype",(function(e){t.fadeType=e})),e.on("newtrack",(function(e){t.load([{src:e,name:e.name}])})),e.on("cut",(function(){var e=t.getActiveTrack(),r=t.getTimeSelection();e.removePart(r.start,r.end,t.ac,e),e.calculatePeaks(t.samplesPerPixel,t.sampleRate),t.setTimeSelection(0,0),t.adjustDuration(),t.drawRequest(),t.ee.emit("cutfinished")})),e.on("razorCut",(function(){var e=t.getActiveTrack(),r=t.getTimeSelection();e.razorCut(r.start,t.ac,e)})),e.on("trim",(function(){var e=t.getActiveTrack(),r=t.getTimeSelection();e.trim(r.start,r.end),e.calculatePeaks(t.samplesPerPixel,t.sampleRate),t.setTimeSelection(0,0),t.adjustDuration(),t.drawRequest()})),e.on("split",(function(){var e=t.getActiveTrack(),r=t.getTimeSelection().start;t.createTrackFromSplit({trackToSplit:e,name:e.name+"_1",splitTime:r}),e.trim(e.startTime,r),e.fadeOut&&(e.removeFade(e.fadeOut),e.fadeOut=void 0),e.calculatePeaks(t.samplesPerPixel,t.sampleRate),t.drawRequest()})),e.on("zoomin",(function(){var e=Math.max(0,t.zoomIndex-1),r=t.zoomLevels[e];r!==t.samplesPerPixel&&(t.setZoom(r),t.drawRequest())})),e.on("zoomout",(function(){var e=Math.min(t.zoomLevels.length-1,t.zoomIndex+1),r=t.zoomLevels[e];r!==t.samplesPerPixel&&(t.setZoom(r),t.drawRequest())})),e.on("scroll",(function(){t.isScrolling=!0,t.drawRequest(),clearTimeout(t.scrollTimer),t.scrollTimer=setTimeout((function(){t.isScrolling=!1}),200)})),e.on("hertjz-loaded",(function(e){t.hertzjsProject=e,t.copyFromHertzjs(e)})),e.on("audiosourcesrendered",(function(){})),e.on("commit",(function(){t.commit()})),e.on("undo",(function(){t.undo()})),e.on("redo",(function(){t.redo()})),e.on("importZipProject",(function(e){t.importZipProject(e)})),e.on("exportZipProject",(function(){t.exportZipProject().then((function(e){t.ee.emit("zipProjectExported",e)}))}))}},{key:"load",value:function(t){var e=this,r=t.map((function(t){return B.createLoader(t.src,e.ac,e.ee).load().then((function(t){return t.sampleRate===e.sampleRate?t:function(t,e){var r=Math.ceil(t.duration*e),n=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(t.numberOfChannels,r,e),i=n.createBufferSource();return i.buffer=t,i.connect(n.destination),i.start(),n.startRendering()}(t,e.sampleRate)}))}));return Promise.all(r).then((function(r){e.ee.emit("audiosourcesloaded");var n=r.map((function(r,n){var i=t[n],a=i.name||"Untitled",s=i.start||0,o=i.states||{},u=i.fadeIn,c=i.fadeOut,l=i.cuein||0,h=i.cueout||r.duration,f=i.gain||1,d=i.muted||!1,p=i.soloed||!1,v=i.selected,m=i.peaks||{type:"WebAudio",mono:e.mono},y=i.customClass||void 0,g=i.waveOutlineColor||void 0,b=i.stereoPan||0,_=i.effects||null,k=new vt(e.ac,r,e.masterGainNode),w=new dt;return w.src=i.src,w.setBuffer(r),w.setName(a),w.setEventEmitter(e.ee),w.setEnabledStates(o),w.setCues(l,h),w.setCustomClass(y),w.setWaveOutlineColor(g),void 0!==u&&w.setFadeIn(u.duration,u.shape),void 0!==c&&w.setFadeOut(c.duration,c.shape),void 0!==v&&(e.setActiveTrack(w),e.setTimeSelection(v.start,v.end)),void 0!==m&&w.setPeakData(m),w.setState(e.getState()),w.setStartTime(s),w.setPlayout(k),w.setGainLevel(f),w.setStereoPanValue(b),_&&w.setEffects(_),d&&e.muteTrack(w),p&&e.soloTrack(w),w.calculatePeaks(e.samplesPerPixel,e.sampleRate),w}));e.tracks=e.tracks.concat(n),e.adjustDuration(),e.draw(e.render()),e.ee.emit("audiosourcesrendered")})).catch((function(t){e.ee.emit("audiosourceserror",t)}))}},{key:"createTrackFromSplit",value:function(t){var e=t.trackToSplit,r=t.name,n=t.splitTime,i=e.enabledStates,a=e.buffer,s=e.fadeOut,o=e.cueIn,u=e.cueOut,c=e.gain||1,l=!1;-1!==this.mutedTracks.indexOf(e)&&(l=!0);var h=!1;-1!==this.soloedTracks.indexOf(e)&&(h=!0);var f=e.peakData,d=e.customClass,p=e.waveOutlineColor,v=e.stereoPan||0,m=e.effectsGraph||null,y=new vt(this.ac,a,this.masterGainNode),g=new dt;if(g.src=e.src,g.setBuffer(a),g.setName(r),g.setEventEmitter(this.ee),g.setEnabledStates(i),g.setCues(o,u),g.setCustomClass(d),g.setWaveOutlineColor(p),void 0!==s){var b=e.fades[s];g.setFadeOut(b.end-b.start,b.shape)}void 0!==f&&g.setPeakData(f),g.setState(this.getState()),g.setPlayout(y),g.setGainLevel(c),g.setStereoPanValue(v),m&&g.setEffects(m),l&&this.muteTrack(g),h&&this.soloTrack(g),g.setStartTime(e.startTime),g.trim(n,g.endTime),g.calculatePeaks(this.samplesPerPixel,this.sampleRate),this.tracks=this.tracks.concat([g]),this.adjustDuration(),this.draw(this.render()),this.setActiveTrack(g),this.ee.emit("audiosourcesrendered")}},{key:"setActiveTrack",value:function(t){this.activeTrack=t}},{key:"getActiveTrack",value:function(){return this.activeTrack}},{key:"isSegmentSelection",value:function(){return this.timeSelection.start!==this.timeSelection.end}},{key:"setTimeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.timeSelection={start:t,end:void 0===e?t:e},this.cursor=t}},{key:"startOfflineRender",value:(n=l(v().mark((function t(e){var r,n,i,a,s=this;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRendering){t.next=2;break}return t.abrupt("return");case 2:return this.isRendering=!0,this.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(2,48e3*this.duration,48e3),r=[],this.ee.emit("audiorenderingstarting",this.offlineAudioContext,r),n=this.offlineAudioContext.currentTime,i=this.offlineAudioContext.createGain(),this.tracks.forEach((function(t){var e=new vt(s.offlineAudioContext,t.buffer,i);e.setEffects(t.effectsGraph),e.setMasterEffects(s.effectsGraph),t.setOfflinePlayout(e),t.schedulePlay(n,0,0,{shouldPlay:s.shouldTrackPlay(t),masterGain:1,isOffline:!0})})),t.next=11,Promise.all(r);case 11:return t.next=13,this.offlineAudioContext.startRendering();case 13:a=t.sent,["buffer","mp3","opus","aac"].includes(e)?(this.ee.emit("audiorenderingfinished",e,a),this.isRendering=!1):"wav"===e&&(this.exportWorker.postMessage({command:"init",config:{sampleRate:48e3}}),this.exportWorker.onmessage=function(t){s.ee.emit("audiorenderingfinished",e,t.data),s.isRendering=!1,s.exportWorker.postMessage({command:"clear"})},this.exportWorker.postMessage({command:"record",buffer:[a.getChannelData(0),a.getChannelData(1)]}),this.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}));case 15:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getTimeSelection",value:function(){return this.timeSelection}},{key:"setState",value:function(t){this.state=t,this.tracks.forEach((function(e){e.setState(t)}))}},{key:"getState",value:function(){return this.state}},{key:"setZoomIndex",value:function(t){this.zoomIndex=t}},{key:"setZoomLevels",value:function(t){this.zoomLevels=t}},{key:"setZoom",value:function(t){var e=this;this.samplesPerPixel=t,this.zoomIndex=this.zoomLevels.indexOf(t),this.tracks.forEach((function(r){r.calculatePeaks(t,e.sampleRate)}))}},{key:"muteTrack",value:function(t){var e=this.mutedTracks.indexOf(t);e>-1?this.mutedTracks.splice(e,1):this.mutedTracks.push(t)}},{key:"soloTrack",value:function(t){var e=this.soloedTracks.indexOf(t);e>-1?this.soloedTracks.splice(e,1):this.exclSolo?this.soloedTracks=[t]:this.soloedTracks.push(t)}},{key:"collapseTrack",value:function(t,e){if(e.collapsed)this.collapsedTracks.push(t);else{var r=this.collapsedTracks.indexOf(t);r>-1&&this.collapsedTracks.splice(r,1)}}},{key:"removeTrack",value:function(t){t.isPlaying()&&t.scheduleStop(),[this.mutedTracks,this.soloedTracks,this.collapsedTracks,this.tracks].forEach((function(e){var r=e.indexOf(t);r>-1&&e.splice(r,1)})),this.adjustDuration()}},{key:"adjustTrackPlayout",value:function(){var t=this;this.tracks.forEach((function(e){e.setShouldPlay(t.shouldTrackPlay(e))}))}},{key:"adjustDuration",value:function(){this.duration=this.tracks.reduce((function(t,e){return Math.max(t,e.getEndTime())}),0)}},{key:"shouldTrackPlay",value:function(t){var e;return this.soloedTracks.length>0?(e=!1,this.soloedTracks.indexOf(t)>-1&&(e=!0)):(e=!0,this.mutedTracks.indexOf(t)>-1&&(e=!1)),e}},{key:"isPlaying",value:function(){return this.tracks.reduce((function(t,e){return t||e.isPlaying()}),!1)}},{key:"getCurrentTime",value:function(){return(this.lastSeeked||this.pausedAt||this.cursor)+this.getElapsedTime()}},{key:"getElapsedTime",value:function(){return this.ac.currentTime-this.lastPlay}},{key:"setMasterGain",value:function(t){this.ee.emit("mastervolumechange",t)}},{key:"restartPlayFrom",value:function(t,e){return this.stopAnimation(),this.tracks.forEach((function(t){t.scheduleStop()})),Promise.all(this.playoutPromises).then(this.play.bind(this,t,e))}},{key:"play",value:function(t,e){var r=this;clearTimeout(this.resetDrawTimer);var n=this.ac.currentTime,i=this.getTimeSelection(),a=[],s=0===t?0:t||this.pausedAt||this.cursor,o=e;return!o&&i.end!==i.start&&i.end>s&&(o=i.end),this.isPlaying()?this.restartPlayFrom(s,o):(this.effectsGraph&&this.tracks&&this.tracks[0].playout.setMasterEffects(this.effectsGraph),this.tracks.forEach((function(t){t.setState("cursor"),a.push(t.schedulePlay(n,s,o,{shouldPlay:r.shouldTrackPlay(t),masterGain:r.masterGain}))})),this.lastPlay=n,this.playoutPromises=a,this.startAnimation(s),Promise.all(this.playoutPromises))}},{key:"pause",value:function(){return!this.isPlaying()&&this.mediaRecorder?"recording"===this.mediaRecorder.state?(this.mediaRecorder.pause(),this.pausedAt=this.getCurrentTime(),this.playbackReset()):"paused"===this.mediaRecorder.state?(this.mediaRecorder.resume(),this.playbackReset()):Promise.all(this.playoutPromises):this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):void 0}},{key:"stop",value:function(){return!this.mediaRecorder||"recording"!==this.mediaRecorder.state&&"paused"!==this.mediaRecorder.state||this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}},{key:"playbackReset",value:function(){var t=this;return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach((function(e){e.scheduleStop(),e.setState(t.getState())})),this.masterGainNode.disconnect(),this.drawRequest(),Promise.all(this.playoutPromises)}},{key:"rewind",value:function(){var t=this;return this.stop().then((function(){t.scrollLeft=0,t.ee.emit("select",0,0)}))}},{key:"fastForward",value:function(){var t=this;return this.stop().then((function(){t.viewDuration<t.duration?t.scrollLeft=t.duration-t.viewDuration:t.scrollLeft=0,t.ee.emit("select",t.duration,t.duration)}))}},{key:"clear",value:function(){var t=this;return this.stop().then((function(){t.tracks=[],t.soloedTracks=[],t.mutedTracks=[],t.playoutPromises=[],t.cursor=0,t.playbackSeconds=0,t.duration=0,t.scrollLeft=0,t.seek(0,0,void 0)}))}},{key:"record",value:function(){var t=this,e=[],r=this.cursor;!this.isPlaying()&&this.mediaRecorder&&"paused"===this.mediaRecorder.state&&this.mediaRecorder.resume(),!this.isPlaying()&&this.mediaRecorder&&"recording"!==this.mediaRecorder.state&&"paused"!==this.mediaRecorder.state&&(this.mediaRecorder.start(300),this.tracks.forEach((function(n){n.setState("none"),e.push(n.schedulePlay(t.ac.currentTime,r,void 0,{shouldPlay:t.shouldTrackPlay(n)}))})),this.playoutPromises=e)}},{key:"startAnimation",value:function(t){var e=this;this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame((function(){e.updateEditor(t)}))}},{key:"stopAnimation",value:function(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}},{key:"seek",value:function(t,e,r){this.isPlaying()?(this.lastSeeked=t,this.pausedAt=void 0,this.restartPlayFrom(t)):(this.setActiveTrack(r||this.tracks[0]),this.pausedAt=t,this.setTimeSelection(t,e),"fill"===this.getSeekStyle()&&(this.playbackSeconds=t))}},{key:"updateEditor",value:function(t){var e=this,r=this.ac.currentTime,n=this.getTimeSelection(),i=t||this.cursor,a=r-this.lastDraw;if(this.isPlaying()){var s=i+a;this.ee.emit("timeupdate",s),this.animationRequest=window.requestAnimationFrame((function(){e.updateEditor(s)})),this.playbackSeconds=s,this.draw(this.render()),this.lastDraw=r}else i+a>=(this.isSegmentSelection()?n.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout((function(){e.pausedAt=void 0,e.lastSeeked=void 0,e.setState(e.getState()),e.playbackSeconds=0,e.draw(e.render())}),0)}},{key:"drawRequest",value:function(){var t=this;window.requestAnimationFrame((function(){t.draw(t.render())}))}},{key:"draw",value:function(t){var e=b()(this.tree,t);this.rootNode=k()(this.rootNode,e),this.tree=t,this.viewDuration=P(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}},{key:"getTrackRenderData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors,barWidth:this.barWidth,barGap:this.barGap};return e()({},t,r)}},{key:"isActiveTrack",value:function(t){var e=this.getActiveTrack();return!this.isSegmentSelection()||e===t}},{key:"renderAnnotations",value:function(){return this.annotationList.render()}},{key:"renderTimeScale",value:function(){var t=this.controls.show?this.controls.width:0;return new M(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,t,this.colors).render()}},{key:"renderTrackSection",value:function(){var t=this,e=this.tracks.map((function(e){var r=t.collapsedTracks.indexOf(e)>-1;return e.render(t.getTrackRenderData({isActive:t.isActiveTrack(e),shouldPlay:t.shouldTrackPlay(e),soloed:t.soloedTracks.indexOf(e)>-1,muted:t.mutedTracks.indexOf(e)>-1,collapsed:r,height:r?t.collapsedWaveHeight:t.waveHeight,barGap:t.barGap,barWidth:t.barWidth}))}));return y()("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:function(e){t.scrollLeft=P(e.target.scrollLeft,t.samplesPerPixel,t.sampleRate),t.ee.emit("scroll")},hook:new N(this)},e)}},{key:"render",value:function(){var t=[];return this.showTimescale&&t.push(this.renderTimeScale()),t.push(this.renderTrackSection()),this.annotationList.length&&t.push(this.renderAnnotations()),y()("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},t)}},{key:"getInfo",value:function(){var t=[];return this.tracks.forEach((function(e){t.push(e.getTrackDetails())})),{tracks:t,effects:this.effectsGraph}}},{key:"copyFromHertzjs",value:(r=l(v().mark((function t(e){var r=this;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.tracks=[],e.tracks.forEach((function(t){t.clips.forEach(function(){var t=l(v().mark((function t(e){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={src:e.path,name:e.path.includes("/")?e.path.match(/\/([^/]+)$/)[1]:e.path,start:e.startsAt,cuein:e.offset,cueout:e.duration},e.effects.forEach((function(t){switch(t.name){case"fade-in":t.params&&t.params.duration>0&&(n.fadeIn={duration:t.params.duration});break;case"fade-out":t.params&&t.params.duration>0&&(n.fadeOut={duration:t.params.duration})}})),r.load([n]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"commit",value:function(){var t=this;this.hertzjsProject||(this.hertzjsProject=new(xt())),window.hjz=this.hertzjsProject,this.hertzjsProject.tracks=[],this.tracks.forEach((function(e){var r=t.hertzjsProject.newTrack(),n=void 0;if(e.src instanceof File){var i=URL.createObjectURL(e.src);n=r.newClip(i)}else if("string"==typeof e.src||e.src instanceof String)n=r.newClip(e.src);else if("object"==u(e)&&e.buffer){var a=e.buffer,s=Et()(a),o=new window.Blob([new DataView(s)],{type:"audio/wav"}),c=window.URL.createObjectURL(o);n=r.newClip(c)}n.setStartsAt(e.startTime),n.setDuration(e.cueOut),n.setOffset(e.cueIn)})),this.hertzjsProject.commit()}},{key:"undo",value:function(){return!!this.hertzjsProject&&!(this.hertzjsProject.history.currentIndex<=1)&&(this.hertzjsProject.undo(),void this.copyFromHertzjs(this.hertzjsProject))}},{key:"redo",value:function(){if(this.hertzjsProject.isInLastVersion())return!1;this.hertzjsProject.redo(),this.copyFromHertzjs(this.hertzjsProject)}},{key:"getHertjzProjectInstance",value:function(){return this.hertzjsProject}},{key:"exportZipProject",value:function(){var t=new(E());t.file("project.json",JSON.stringify(this.hertzjsProject)),t.file("README.txt","Nothing here!");var e=[];return this.hertzjsProject.tracks.forEach((function(r){r.clips.forEach((function(r){if(r.path.indexOf("blob:")>=0){var n=fetch(r.path).then((function(t){return t.blob()})).then((function(e){var n=r.path.split("/").pop();t.file("blob."+n,e)}));e.push(n)}}))})),Promise.all(e).then((function(){return t.generateAsync({type:"blob"})}))}},{key:"importZipProject",value:function(t){var e=this;e.hertzjsProject||this.commit(),E().loadAsync(t).then((function(t){t.file("project.json").async("blob").then((function(r){var n=new FileReader;n.onload=function(r){var n=r.target.result,i=JSON.parse(n);e.hertzjsProject.history.setHistoryStack(i.history.stack),e.hertzjsProject.history.setCooldownState(i.history.cooldownState),e.hertzjsProject.history.setCurrentIndex(i.history.currentIndex),e.hertzjsProject.history.setCooldown(i.history.cooldown),e.hertzjsProject.tracks=i.tracks;var a=[];t.forEach((function(t,r){if(!r.dir){if("project.json"==r.name)return;var n=r.async("blob").then((function(t){if("blob."==r.name.substring(0,5)){var n=URL.createObjectURL(t);e.hertzjsProject.tracks.forEach((function(t){t.clips.forEach((function(t){var i=t.path,a=t.path.split("/").pop();console.log("clip:clipfilename",a),console.log("clip:newUrl",n),console.log("clip:clip.path",t.path),console.log("clip:name.substr",r.name.substring(5)),a==r.name.substring(5)&&(t.path=n);for(var s=0;s<e.hertzjsProject.history.stack.length;s++)e.hertzjsProject.history.stack[s]=e.hertzjsProject.history.stack[s].replace(i,n)}))})),console.log("history stack ",e.hertzjsProject.history.stack)}}));a.push(n)}})),Promise.all(a).then((function(){e.copyFromHertzjs(e.hertzjsProject)}))},n.readAsText(r)})).catch((function(t){console.error("Could not import the project, make sure it contains a history.json file:")}))}))}}]),t}();function Pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o()();if(void 0===t.container)throw new Error("DOM element container must be given.");var n=e()({},t,{samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150,widgets:{muteOrSolo:!0,volume:!0,stereoPan:!0,collapse:!0,remove:!0}},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,collapsedWaveHeight:30,barWidth:1,barGap:0,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1}),i=n.zoomLevels.indexOf(n.samplesPerPixel);if(-1===i)throw new Error("initial samplesPerPixel must be included in array zoomLevels");var s=new Ot,u=n.ac||new AudioContext;s.setAudioContext(u),s.setSampleRate(n.sampleRate||u.sampleRate),s.setSamplesPerPixel(n.samplesPerPixel),s.setEventEmitter(r),s.setUpEventEmitter(),s.setTimeSelection(0,0),s.setState(n.state),s.setControlOptions(n.controls),s.setWaveHeight(n.waveHeight),s.setCollapsedWaveHeight(n.collapsedWaveHeight),s.setColors(n.colors),s.setZoomLevels(n.zoomLevels),s.setZoomIndex(i),s.setMono(n.mono),s.setExclSolo(n.exclSolo),s.setShowTimeScale(n.timescale),s.setSeekStyle(n.seekStyle),s.setAnnotations(n.annotationList),s.setBarGap(n.barGap),s.setBarWidth(n.barWidth),s.isAutomaticScroll=n.isAutomaticScroll,s.isContinuousPlay=n.isContinuousPlay,s.linkedEndpoints=n.linkedEndpoints,n.effects&&s.setEffects(n.effects);var c=s.render(),l=a()(c);return n.container.appendChild(l),s.tree=c,s.rootNode=l,s}function Ct(){return Pt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:o()())}})(),WaveformPlaylist=n})();